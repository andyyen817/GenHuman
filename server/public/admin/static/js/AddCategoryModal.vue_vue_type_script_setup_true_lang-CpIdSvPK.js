import{d as e,M as a,f as l,c as t,g as s,o as d,a as u,w as o,j as i,i as r,H as m,$ as c}from"./index-C2oOc9l2.js";import{a as n,s as f}from"./category-GSCvCUAy.js";import{u as v}from"./useResetReactive-DoDpM4Bk.js";const p=e({__name:"AddCategoryModal",emits:["save-success"],setup(e,{expose:p,emit:h}){const b=h,w=a("formRef"),V=l(""),_=t((()=>!!V.value)),x=t((()=>_.value?"编辑文章分类":"新增文章分类")),y=l(!1),[g,k]=v({title:"",status:1,sort:0}),j={title:[{required:!0,message:"请输入文章分类名称"},{min:3,max:10,message:"长度在 3 - 10个字符"}],sort:[{required:!0,message:"请输入文章分类排序"}],status:[{required:!0}]},M=()=>{var e;null==(e=w.value)||e.resetFields(),k()},R=async()=>{var e;try{if(await(null==(e=w.value)?void 0:e.validate()))return!1;return!!(await f(g))&&(c.success("保存成功"),b("save-success"),!0)}catch(a){return!1}};return p({add:()=>{V.value="",y.value=!0},edit:async e=>{y.value=!0,V.value=e;const a=await n({id:e});a.data.price=1*a.data.price,Object.assign(g,a.data)}}),(e,a)=>{const l=s("a-input"),t=s("a-form-item"),c=s("a-input-number"),n=s("a-switch"),f=s("a-form"),v=s("a-modal");return d(),u(v,{visible:r(y),"onUpdate:visible":a[3]||(a[3]=e=>m(y)?y.value=e:null),title:r(x),width:"90%","mask-closable":!1,"modal-style":{maxWidth:"520px"},onBeforeOk:R,onClose:M},{default:o((()=>[i(f,{ref_key:"formRef",ref:w,model:r(g),rules:j,size:"medium","auto-label-width":""},{default:o((()=>[i(t,{label:"分类名称",field:"title"},{default:o((()=>[i(l,{modelValue:r(g).title,"onUpdate:modelValue":a[0]||(a[0]=e=>r(g).title=e),modelModifiers:{trim:!0},placeholder:"请输入文章分类名称","allow-clear":""},null,8,["modelValue"])])),_:1}),i(t,{label:"排序（小到大）",field:"sort"},{default:o((()=>[i(c,{modelValue:r(g).sort,"onUpdate:modelValue":a[1]||(a[1]=e=>r(g).sort=e),modelModifiers:{trim:!0},placeholder:"请输入排序（小到大）","allow-clear":""},null,8,["modelValue"])])),_:1}),i(t,{label:"状态",field:"status"},{default:o((()=>[i(n,{modelValue:r(g).status,"onUpdate:modelValue":a[2]||(a[2]=e=>r(g).status=e),type:"round","checked-value":1,"unchecked-value":0,"checked-text":"正常","unchecked-text":"禁用"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"])}}});export{p as _};
