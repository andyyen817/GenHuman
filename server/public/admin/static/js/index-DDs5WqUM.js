import{_ as e}from"./index.vue_vue_type_script_setup_true_lang-DiPgUrne.js";import a from"./index-CrAwCWGn.js";import{f as s,d as l,J as t,P as o,y as r,Y as i,M as n,h as u,j as d,w as m,g as c,p,o as g,k as _,i as f,Z as v,t as y,G as w,$ as h,_ as x}from"./index-CyyHvq4l.js";import{P as j}from"./regexp-CcC9eZsJ.js";import"./CornerTop.vue_vue_type_script_setup_true_lang-B3xz_Naf.js";import"./CornerBottom.vue_vue_type_script_setup_true_lang-aA52hyXH.js";const V={class:"login"},k={class:"login-right"},b={class:"login-right__title"},z=["src"],q=x(l({name:"Login",__name:"index",setup(l){const x=p(),q=t(),C=o(),L=r(),R=i({username:"",password:""}),U={username:[{required:!0,message:"请输入账号"}],password:[{required:!0,message:"请输入密码"},{match:j,message:"输入密码格式不正确"}]};L.getInfo(),s(!1);const{loading:B,setLoading:I}=function(e=!1){const a=s(e);return{loading:a,setLoading:e=>{a.value=e},toggle:()=>{a.value=!a.value}}}(),P=s(""),S=n("formRef"),W=async()=>{var e;try{if(await(null==(e=S.value)?void 0:e.validate()))return;I(!0),await q.login(R),C.reset();const{redirect:a,...s}=x.currentRoute.value.query;x.push({path:a||"/",query:{...s}}),h.success("登录成功")}catch(a){P.value=a.message}finally{I(!1)}};return(s,l)=>{const t=c("a-col"),o=c("icon-user"),r=c("a-input"),i=c("a-form-item"),n=c("icon-lock"),p=c("a-input-password"),h=c("a-button"),x=c("a-space"),j=c("a-form"),q=c("a-row"),C=e;return g(),u("div",V,[d(q,{align:"stretch",class:"login-box"},{default:m((()=>[d(t,{xs:0,sm:12,md:15},{default:m((()=>l[2]||(l[2]=[_("div",{class:"login-left"},[_("img",{class:"login-left__img",src:"/admin/static/svg/login-img-BnXpmWAf.svg"})],-1)]))),_:1}),d(t,{xs:24,sm:12,md:9},{default:m((()=>[_("div",k,[d(j,{ref_key:"formRef",ref:S,size:f(v)()?"large":"medium",model:f(R),rules:U,style:{width:"84%"},"label-col-style":{display:"none"},"wrapper-col-style":{flex:1}},{default:m((()=>[_("h3",b,[_("img",{class:"logo",src:f(L).logo},null,8,z),_("span",null,y(f(L).name),1)]),d(i,{field:"username"},{default:m((()=>[d(r,{modelValue:f(R).username,"onUpdate:modelValue":l[0]||(l[0]=e=>f(R).username=e),placeholder:"账号","allow-clear":""},{prefix:m((()=>[d(o,{"stroke-width":1,style:{fontSize:"20px"}})])),_:1},8,["modelValue"])])),_:1}),d(i,{field:"password"},{default:m((()=>[d(p,{modelValue:f(R).password,"onUpdate:modelValue":l[1]||(l[1]=e=>f(R).password=e),placeholder:"密码","allow-clear":""},{prefix:m((()=>[d(n,{"stroke-width":1,style:{fontSize:"20px"}})])),_:1},8,["modelValue"])])),_:1}),d(i,null,{default:m((()=>[d(x,{direction:"vertical",fill:"",class:"w-full"},{default:m((()=>[d(h,{type:"primary",size:"large",long:"",loading:f(B),onClick:W},{default:m((()=>l[3]||(l[3]=[w("登录")]))),_:1},8,["loading"])])),_:1})])),_:1})])),_:1},8,["size","model"])])])),_:1})])),_:1}),d(C,{class:"theme-btn"}),d(a)])}}}),[["__scopeId","data-v-1ca1b34a"]]);export{q as default};
