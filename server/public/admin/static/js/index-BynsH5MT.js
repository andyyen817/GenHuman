import{d as e,f as a,M as o,c as l,U as s,a7 as t,u as n,e$ as u,f0 as i,g as d,o as c,a as r,w as v,B as p,k as f,v as m,i as _,j as x,t as y,eU as g,Q as C,_ as h,f1 as w,f2 as b,eM as k}from"./index-CyyHvq4l.js";import"./AudioModalContent.vue_vue_type_style_index_0_scoped_a0590cf0_lang-YA0YoIMp.js";const E={style:{padding:"10px 14px 14px 14px"}},A={class:"audio-name"},M=["src"],R=h(e({__name:"AudioModalContent",props:{data:{},onClose:{}},setup(e){const h=e,w=a(!1),b=o("audioRef"),k=o("audioHeadRef"),R=l((()=>{var e;return(null==(e=h.data)?void 0:e.url)||""}));s((()=>{w.value=!0;const e=()=>{var e;null==(e=h.onClose)||e.call(h)};window.addEventListener("close-current-audio-modal",e),t((()=>{window.removeEventListener("close-current-audio-modal",e)}))}));const{width:S,height:j}=n(),{width:I,height:$}=u(b),z=a({top:40,left:S.value-I.value}),D=JSON.parse(sessionStorage.getItem("AudioDialogXY"));D&&D.top&&D.left&&(z.value.top=D.top,z.value.left=D.left);const{x:H,y:J}=i(b,{initialValue:{x:z.value.left-I.value,y:z.value.top}}),L=l((()=>{let e=H.value,a=J.value;return H.value>S.value-I.value&&(e=S.value-I.value),H.value<0&&(e=0),J.value>j.value-$.value&&(a=j.value-$.value),J.value<0&&(a=0),sessionStorage.setItem("AudioDialogXY",JSON.stringify({top:a,left:e})),{left:`${e}px`,top:`${a}px`}})),N=()=>{w.value=!1,h.onClose&&h.onClose()};return(e,a)=>{const o=d("icon-music"),l=d("icon-close");return c(),r(C,{name:"slide-dynamic-origin"},{default:v((()=>{var e,a;return[p(f("div",{ref_key:"audioRef",ref:b,class:"audio-box",style:m(_(L))},[f("section",E,[f("div",{ref_key:"audioHeadRef",ref:k,class:"audio-box__header"},[f("div",A,[x(o,{size:16,spin:""}),f("span",null,y(null==(e=h.data)?void 0:e.name)+"."+y(null==(a=h.data)?void 0:a.ext),1)]),f("div",{class:"close-icon",onClick:N},[x(l,{size:12})])],512),f("audio",{class:"audio",src:_(R),controls:"",autoplay:""},null,8,M)])],4),[[g,_(w)]])]})),_:1})}}}),[["__scopeId","data-v-a0590cf0"]]);let S="";function j(e){if(S!=e.id){if(S){const e=new CustomEvent("close-current-audio-modal");window.dispatchEvent(e)}return S=e.id,function(e,a){const o=document.createElement("div");document.body.appendChild(o);const l=w(e,{...a,onClose:()=>{setTimeout((()=>{l.unmount(),document.body.removeChild(o),(null==a?void 0:a.callback)&&(null==a||a.callback())}),350)}});l.use(b),l.use(k),l.mount(o)}(R,{data:e,callback:()=>{S=""}})}}export{j as p};
