import{a as e,s as l}from"./plans-DWoQMAkY.js";import{d as a,M as i,f as t,c as d,g as o,o as s,a as r,w as u,j as m,i as n,H as c,$ as p}from"./index-CyyHvq4l.js";import{u as f}from"./useResetReactive-3wdC2HLy.js";const v=a({__name:"AddPlansModal",emits:["save-success"],setup(a,{expose:v,emit:V}){const g=V,_=i("formRef"),h=t(""),b=d((()=>!!h.value)),w=d((()=>b.value?"编辑文章分类":"新增文章分类")),x=t(!1),[M,U]=f({title:"",price:0,original_price:0,points:0,give:0,status:1,sort:0}),k={price:[{required:!0,message:"请输入套餐价格"}],original_ptice:[{required:!0,message:"请输入套餐原价"}],points:[{required:!0,message:"请输入套餐点数"}],give:[{required:!0,message:"请输入套餐赠送点数"}],title:[{required:!0,message:"请输入套餐名称"},{min:3,max:10,message:"长度在 3 - 10个字符"}],sort:[{required:!0,message:"请输入套餐排序"}],status:[{required:!0}]},q=()=>{var e;null==(e=_.value)||e.resetFields(),U()},y=async()=>{var e;try{if(await(null==(e=_.value)?void 0:e.validate()))return!1;return!!(await l(M))&&(p.success("保存成功"),g("save-success"),!0)}catch(a){return!1}};return v({add:()=>{h.value="",x.value=!0},edit:async l=>{x.value=!0,h.value=l;const a=await e({id:l});a.data.price=1*a.data.price,Object.assign(M,a.data)}}),(e,l)=>{const a=o("a-input"),i=o("a-form-item"),t=o("a-input-number"),d=o("a-switch"),p=o("a-form"),f=o("a-modal");return s(),r(f,{visible:n(x),"onUpdate:visible":l[7]||(l[7]=e=>c(x)?x.value=e:null),title:n(w),width:"90%","mask-closable":!1,"modal-style":{maxWidth:"520px"},onBeforeOk:y,onClose:q},{default:u((()=>[m(p,{ref_key:"formRef",ref:_,model:n(M),rules:k,size:"medium","auto-label-width":""},{default:u((()=>[m(i,{label:"套餐名称",field:"title"},{default:u((()=>[m(a,{modelValue:n(M).title,"onUpdate:modelValue":l[0]||(l[0]=e=>n(M).title=e),modelModifiers:{trim:!0},placeholder:"请输入套餐名称","allow-clear":""},null,8,["modelValue"])])),_:1}),m(i,{label:"价格",field:"price"},{default:u((()=>[m(t,{modelValue:n(M).price,"onUpdate:modelValue":l[1]||(l[1]=e=>n(M).price=e),modelModifiers:{trim:!0},placeholder:"请输入价格","allow-clear":""},null,8,["modelValue"])])),_:1}),m(i,{label:"原价（划线价）",field:"original_price"},{default:u((()=>[m(t,{modelValue:n(M).original_price,"onUpdate:modelValue":l[2]||(l[2]=e=>n(M).original_price=e),modelModifiers:{trim:!0},placeholder:"请输入原价（划线价）","allow-clear":""},null,8,["modelValue"])])),_:1}),m(i,{label:"点数",field:"points"},{default:u((()=>[m(t,{modelValue:n(M).points,"onUpdate:modelValue":l[3]||(l[3]=e=>n(M).points=e),modelModifiers:{trim:!0},placeholder:"请输入获得点数","allow-clear":""},null,8,["modelValue"])])),_:1}),m(i,{label:"赠送点数",field:"give"},{default:u((()=>[m(t,{modelValue:n(M).give,"onUpdate:modelValue":l[4]||(l[4]=e=>n(M).give=e),modelModifiers:{trim:!0},placeholder:"请输入赠送点数","allow-clear":""},null,8,["modelValue"])])),_:1}),m(i,{label:"排序（小到大）",field:"sort"},{default:u((()=>[m(t,{modelValue:n(M).sort,"onUpdate:modelValue":l[5]||(l[5]=e=>n(M).sort=e),modelModifiers:{trim:!0},placeholder:"请输入排序（小到大）","allow-clear":""},null,8,["modelValue"])])),_:1}),m(i,{label:"状态",field:"status"},{default:u((()=>[m(d,{modelValue:n(M).status,"onUpdate:modelValue":l[6]||(l[6]=e=>n(M).status=e),type:"round","checked-value":1,"unchecked-value":0,"checked-text":"正常","unchecked-text":"禁用"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["visible","title"])}}});export{v as _};
