import{_ as e}from"./GiCellState.vue_vue_type_script_setup_true_lang-DdEBmzdu.js";import{_ as t}from"./GiCellAvatar.vue_vue_type_script_setup_true_lang-DyiSYg9h.js";import{_ as a}from"./GiForm-CgJix31c.js";import{a3 as l,d as i,a2 as n,g as s,o as d,a as r,w as o,j as c,i as u,H as p,G as _,t as m,k as g,$ as v}from"./index-BOEMWj3F.js";import{p as f}from"./index-8C3Snojy.js";import"./AudioModalContent.vue_vue_type_style_index_0_scoped_a0590cf0_lang-OEnHZN8V.js";const x=i({__name:"index",setup(i){const{loading:x,tableData:h,pagination:b,search:y,fixed:w,searchParams:k,reset:j}=n((e=>{return t=e,l.get("/Scene/getList",t);var t}),{immediate:!0}),C=[{type:"input",label:"昵称",field:"nickname"},{type:"input",label:"用户ID",field:"userId"},{type:"input",label:"场景名称",field:"title"},{type:"select",label:"状态",field:"status",props:{options:[{label:"全部",value:""},{label:"创建中",value:1},{label:"已完成",value:2},{label:"失败",value:3}]}}],I=e=>{(function(e){return l.post("/Scene/delete",{id:e})})(e).then((e=>{v.success("删除成功"),y()})).catch((e=>{v.error(e.message)}))};return(l,i)=>{const n=a,v=s("a-table-column"),S=t,D=s("a-image"),G=s("a-button"),V=e,A=s("icon-delete"),O=s("a-popconfirm"),P=s("a-table"),R=s("a-card");return d(),r(R,{title:"场景分身",class:"gi_page_card"},{default:o((()=>[c(n,{modelValue:u(k),"onUpdate:modelValue":i[0]||(i[0]=e=>p(k)?k.value=e:null),search:"",columns:C,"grid-item-props":{span:{xs:24,sm:12,md:8,lg:8,xl:6,xxl:6}},onSearch:u(y),onReset:u(j)},null,8,["modelValue","onSearch","onReset"]),c(P,{class:"gi_table","row-key":"id",data:u(h),bordered:{cell:!0},loading:u(x),scroll:{x:"100%",y:"100%",minWidth:1200},pagination:u(b)},{columns:o((()=>[c(v,{title:"序号",width:64},{cell:o((e=>[_(m(e.rowIndex+1),1)])),_:1}),c(v,{title:"用户信息","data-index":"nickname"},{cell:o((({record:e})=>[c(S,{avatar:e.avatar,name:e.nickname},null,8,["avatar","name"])])),_:1}),c(v,{title:"分身名称","data-index":"title"}),c(v,{title:"封面",width:150},{cell:o((({record:e})=>[c(D,{src:e.cover,width:"60",height:"60"},null,8,["src"])])),_:1}),c(v,{title:"视频地址",width:150},{cell:o((({record:e})=>[c(G,{type:"text",onClick:t=>{var a;f({name:(a=e).title,id:a.id,url:a.video_url,filePath:a.video_url})}},{default:o((()=>i[1]||(i[1]=[_("点击播放")]))),_:2},1032,["onClick"]),c(G,{type:"text",status:"success",onClick:t=>{return a=e,void window.open(a.video_url,"_blank");var a}},{default:o((()=>i[2]||(i[2]=[_("点击下载")]))),_:2},1032,["onClick"])])),_:1}),c(v,{title:"任务ID","data-index":"task_id",width:150}),c(v,{title:"场景ID","data-index":"scene_id",ellipsis:!0,tooltip:!0}),c(v,{title:"状态",width:150,align:"center"},{cell:o((({record:e})=>[c(V,{status:e.status},null,8,["status"])])),_:1}),c(v,{title:"创建时间","data-index":"create_time",width:180}),c(v,{title:"操作",width:100,align:"center",fixed:u(w)},{cell:o((({record:e})=>[c(O,{type:"warning",content:"确定删除该数据吗?",onOk:t=>I(e.id)},{default:o((()=>[c(G,{type:"primary",status:"danger",size:"mini",disabled:e.disabled},{icon:o((()=>[c(A)])),default:o((()=>[i[3]||(i[3]=g("span",null,"删除",-1))])),_:2},1032,["disabled"])])),_:2},1032,["onOk"])])),_:1},8,["fixed"])])),_:1},8,["data","loading","pagination"])])),_:1})}}});export{x as default};
