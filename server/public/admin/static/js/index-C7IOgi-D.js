import{d as a,f as e,M as o,c as l,U as s,a7 as t,u as n,am as u,an as i,g as d,o as c,a as r,w as v,B as p,k as f,v as m,i as _,j as x,t as y,ad as g,Q as C,_ as h,ao as w,ap as b,aq as k}from"./index-PFxU9JJn.js";import"./AudioModalContent.vue_vue_type_style_index_0_scoped_a0590cf0_lang-BwzHiRcr.js";const E={style:{padding:"10px 14px 14px 14px"}},A={class:"audio-name"},R=["src"],S=h(a({__name:"AudioModalContent",props:{data:{},onClose:{}},setup(a){const h=a,w=e(!1),b=o("audioRef"),k=o("audioHeadRef"),S=l((()=>{var a;return(null==(a=h.data)?void 0:a.url)||""}));s((()=>{w.value=!0;const a=()=>{var a;null==(a=h.onClose)||a.call(h)};window.addEventListener("close-current-audio-modal",a),t((()=>{window.removeEventListener("close-current-audio-modal",a)}))}));const{width:j,height:I}=n(),{width:M,height:z}=u(b),D=e({top:40,left:j.value-M.value}),H=JSON.parse(sessionStorage.getItem("AudioDialogXY"));H&&H.top&&H.left&&(D.value.top=H.top,D.value.left=H.left);const{x:J,y:L}=i(b,{initialValue:{x:D.value.left-M.value,y:D.value.top}}),N=l((()=>{let a=J.value,e=L.value;return J.value>j.value-M.value&&(a=j.value-M.value),J.value<0&&(a=0),L.value>I.value-z.value&&(e=I.value-z.value),L.value<0&&(e=0),sessionStorage.setItem("AudioDialogXY",JSON.stringify({top:e,left:a})),{left:`${a}px`,top:`${e}px`}})),O=()=>{w.value=!1,h.onClose&&h.onClose()};return(a,e)=>{const o=d("icon-music"),l=d("icon-close");return c(),r(C,{name:"slide-dynamic-origin"},{default:v((()=>{var a,e;return[p(f("div",{ref_key:"audioRef",ref:b,class:"audio-box",style:m(_(N))},[f("section",E,[f("div",{ref_key:"audioHeadRef",ref:k,class:"audio-box__header"},[f("div",A,[x(o,{size:16,spin:""}),f("span",null,y(null==(a=h.data)?void 0:a.name)+"."+y(null==(e=h.data)?void 0:e.ext),1)]),f("div",{class:"close-icon",onClick:O},[x(l,{size:12})])],512),f("audio",{class:"audio",src:_(S),controls:"",autoplay:""},null,8,R)])],4),[[g,_(w)]])]})),_:1})}}}),[["__scopeId","data-v-a0590cf0"]]);let j="";function I(a){if(j!=a.id){if(j){const a=new CustomEvent("close-current-audio-modal");window.dispatchEvent(a)}return j=a.id,function(a,e){const o=document.createElement("div");document.body.appendChild(o);const l=w(a,{...e,onClose:()=>{setTimeout((()=>{l.unmount(),document.body.removeChild(o),(null==e?void 0:e.callback)&&(null==e||e.callback())}),350)}});l.use(b),l.use(k),l.mount(o)}(S,{data:a,callback:()=>{j=""}})}}export{I as p};
