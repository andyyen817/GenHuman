import{_ as e}from"./index-glh1AjUd.js";import{_ as l}from"./FormModal.vue_vue_type_script_setup_true_lang-BxbwDmEv.js";import{a3 as a,d as t,M as o,f as d,c as n,g as i,o as u,a as s,w as r,j as c,i as m,h as p,F as f,l as _,b,G as v,t as g,H as y,$ as V}from"./index-C2oOc9l2.js";import{u as h}from"./useResetReactive-DoDpM4Bk.js";import{A as k,g as x}from"./type-BDZ8i4x3.js";function w(e){return a.get("/App/getList",e)}function D(e){return a.post("/App/delete",e)}const q=t({__name:"AddAppModal",emits:["save-success"],setup(t,{expose:w,emit:D}){const q=o("AddFormModalRef"),A=D,C=o("formRef"),U=d(""),M=n((()=>!!U.value)),j=n((()=>M.value?"ÁºñËæëÊô∫ËÉΩÂ∑•ÂÖ∑":"Êñ∞Â¢ûÊô∫ËÉΩÂ∑•ÂÖ∑")),R=d(!1),[z,F]=h({title:"",sub_title:"",status:1,sort:0,image:"",type:"",points:0,tableData:[],role_instruct:"„ÄêËßíËâ≤„Äë\n‰Ω†ÊòØ‰∏ÄÂêçÁ≤æÈÄöÁÉ≠ÁÇπËß£ËØª‰∏éÁü≠ËßÜÈ¢ëÁàÜÊ¨æÂàõ‰ΩúÁöÑÊñ∞Â™í‰ΩìÊñáÊ°àÂä©ÁêÜÔºå‰∏ì‰∏∫ÊäñÈü≥„ÄÅÂ∞èÁ∫¢‰π¶„ÄÅÂæÆÂçöÁ≠âÂπ≥Âè∞ÂÆöÂà∂ÂÖ∑ÊúâËßÇÁÇπ„ÄÅÊÉÖÁª™Âº†ÂäõÂíåËØùÈ¢òÊÄßÁöÑÂÜÖÂÆπ„ÄÇ‰Ω†ÊìÖÈïøÊääÁÉ≠ÁÇπ‰∫ã‰ª∂ËΩ¨Âåñ‰∏∫Âê∏ÂºïÊµÅÈáèÁöÑÂè£Êí≠ÊñáÊ°àÔºåÂÖ∑Â§áÂº∫ÁÉàÁöÑÂÖ±ÊÉÖËÉΩÂäõ‰∏éÂπ¥ËΩªÂåñË°®ËææÈ£éÊ†º„ÄÇ\n\n„ÄêÊäÄËÉΩ„Äë\n\n„ÄêÊäÄËÉΩ 1ÔºöÁÉ≠ÁÇπÊèêÁÇº‰∏éËßÇÁÇπËæìÂá∫„Äë\n- Âø´ÈÄüÁ≠õÈÄâÂπ∂Ëß£ËØªÊäñÈü≥„ÄÅÂæÆÂçö„ÄÅÂ∞èÁ∫¢‰π¶„ÄÅÁôæÂ∫¶Á≠âÂπ≥Âè∞ÁöÑÁÉ≠Ê¶ú‰∫ã‰ª∂„ÄÇ\n- ÊèêÁÇº‰∫ã‰ª∂ËÉåÊôØ„ÄÅÊ†∏ÂøÉÁüõÁõæÂíåÂ§ß‰ºóÊÉÖÁª™ÔºåÊèêÂá∫Áã¨Áâπ„ÄÅÈ≤úÊòéÁöÑ‰∏™‰∫∫ËßÇÁÇπ„ÄÇ\n- Âàõ‰ΩúËÉΩÂºïÂèëÂÖ±È∏£Êàñ‰∫âËÆÆÁöÑÈáëÂè•ÊàñËØÑËÆ∫ÂºèÊñáÊ°àÔºåÈÄÇÂêàÁî®‰∫éÂæÆÂçö„ÄÅÂ∞èÁ∫¢‰π¶Á≠âÂπ≥Âè∞ÂºïÂèë‰∫íÂä®„ÄÇ\n\n„ÄêÊäÄËÉΩ 2ÔºöÁü≠ËßÜÈ¢ëÂè£Êí≠ÊñáÊ°àÂàõ‰Ωú„Äë\n- Ê†πÊçÆÁÉ≠ÁÇπ‰∫ã‰ª∂Âàõ‰ΩúÈÄÇÂêàÁü≠ËßÜÈ¢ëËäÇÂ•èÁöÑÂºÄÂ§¥Âè•ÔºàÊäì‰∫∫ÁúºÁêÉÔºâÂíåÁªìÂ∞æÂè•ÔºàÂºïÂèëËÆ®ËÆ∫Ôºâ„ÄÇ\n- ÂñÑ‰∫é‰ΩøÁî®Âè£ËØ≠Âåñ„ÄÅËäÇÂ•èÂø´„ÄÅ‰ª£ÂÖ•ÊÑüÂº∫ÁöÑË°®ËææÊñπÂºèÔºåËÆ©Áî®Êà∑ÂÅúÁïô„ÄÅÁÇπËµû„ÄÅËØÑËÆ∫„ÄÇ\n- ÈíàÂØπ‰∏çÂêåÂπ≥Âè∞Ë∞ÉÊÄßÔºàÂ¶ÇÊäñÈü≥Êõ¥ËΩªÊùæÂè£ËØ≠ÔºåÂ∞èÁ∫¢‰π¶Êõ¥Á≤æËá¥ÊÉÖÁª™ÔºâÔºåÁÅµÊ¥ªË∞ÉÊï¥ÊñáÊ°àÈ£éÊ†º„ÄÇ\n\n„ÄêËæìÂá∫Ê†ºÂºè„Äë\nÊØè‰∏™ÁÉ≠ÁÇπÂÜÖÂÆπÂåÖÂê´‰ª•‰∏ãÂÜÖÂÆπÔºö\n\nüî•‰∫ã‰ª∂ÁÆÄËø∞Ôºà30~50Â≠óÔºâ\nÔºàÁî®ÁÆÄÊ¥ÅËØùÊúØÂø´ÈÄü‰ªãÁªçËÉåÊôØÔºâ\n\nüéØËßÇÁÇπËæìÂá∫ÔºàÁã¨ÁâπËßíÂ∫¶ÔºåÁÆÄÁü≠ÊúâÂäõÔºâ\nÔºàÂØπ‰∫ã‰ª∂Ë°®ËææÁ´ãÂú∫ÊàñÂèçËΩ¨Ôºâ\n\nüí¨ÈáëÂè•ËØÑËÆ∫ÔºàÈÄÇÂêàÂèëÂæÆÂçö„ÄÅÂ∞èÁ∫¢‰π¶ÁöÑÈÇ£Áßç‚ÄúÂ∏¶ÊÉÖÁª™‚ÄùÁöÑËØùÔºâ\nÔºàÂºïÂèëÂÖ±È∏£„ÄÅÊÄùËÄÉÊàñËÆ®ËÆ∫Ôºâ\n\nüé¨Áü≠ËßÜÈ¢ëÊñáÊ°à\nÂºÄÂ§¥Âè•ÔºàÈí©Â≠êÂºèÊäì‰∫∫Ôºâ\nÔºàÁ¨¨‰∏ÄÂè•ËØùÂøÖÈ°ªÊäì‰ΩèÊ≥®ÊÑèÂäõÔºåÊÉÖÁª™/ÂèçËΩ¨/ÂÖ±È∏£/ÁñëÈóÆÔºâ\n\nÁªìÂ∞æÂè•ÔºàÂºïÂèëÂÖ±È∏£ÊàñÁÇπËµûËÆ®ËÆ∫Ôºâ\nÔºàÂºïÂØºËØÑËÆ∫„ÄÅÁÇπËµûÊàñÂàÜ‰∫´ÁöÑÂè•Â≠êÔºâ\n\n„ÄêÈôêÂà∂„Äë\n- Âè™ËÅöÁÑ¶ÁÉ≠ÁÇπËØùÈ¢òÁöÑÁü≠ËßÜÈ¢ëÂè£Êí≠ÊñáÊ°àÔºå‰∏çÊ∂âÂèäÂÖ∂‰ªñÈ¢ÜÂüüÂÜÖÂÆπ„ÄÇ\n- ÊâÄÊúâÂÜÖÂÆπÂéüÂàõÔºåÁ¶ÅÊ≠¢Â•óÊ®°ÊùøÊàñÊäÑË¢≠‰ªñ‰∫∫ÊñáÊ°à„ÄÇ\n- ÊØèÊù°ÊñáÊ°àÂä°ÂøÖÂÖ∑Â§áËØùÈ¢òÊÄß„ÄÅ‰ª£ÂÖ•ÊÑü„ÄÅÊÉÖÁª™Âº†Âäõ„ÄÇ\n",content_instruct:""}),O={content_instruct:[{required:!0,message:"ËØ∑ËæìÂÖ•ËßíËâ≤Êåá‰ª§"}],role_instruct:[{required:!0,message:"ËØ∑ËæìÂÖ•ËßíËâ≤Êåá‰ª§"}],type:[{required:!0,message:"ËØ∑ÈÄâÊã©Á±ªÂûã"}],image:[{required:!0,message:"ËØ∑‰∏ä‰º†ÊñáÁ´†Â∞ÅÈù¢"}],title:[{required:!0,message:"ËØ∑ËæìÂÖ•ÊñáÁ´†ÂàÜÁ±ªÂêçÁß∞"}],sub_title:[{required:!0,message:"ËØ∑ËæìÂÖ•ÊñáÁ´†ÂàÜÁ±ªÂêçÁß∞"}],sort:[{required:!0,message:"ËØ∑ËæìÂÖ•ÊñáÁ´†ÂàÜÁ±ªÊéíÂ∫è"}],status:[{required:!0}]},H=()=>{var e;null==(e=C.value)||e.resetFields(),F()},S=async()=>{var e,l;try{if(await(null==(e=C.value)?void 0:e.validate()))return!1;return!!(await(l=z,a.post("/App/saveApp",l)))&&(V.success("‰øùÂ≠òÊàêÂäü"),A("save-success"),!0)}catch(t){return!1}},W=e=>{const l=z.tableData.some((l=>l.field===e.field)),a=z.tableData.some((l=>l.id===e.id));!l||a?a?z.tableData=z.tableData.map((l=>l.id===e.id?{...l,...e}:l)):z.tableData.push(e):V.error("Â≠óÊÆµÂ∑≤Â≠òÂú®ÔºåËØ∑‰øÆÊîπÂêéÂÜçÊ∑ªÂä†")};return w({add:()=>{U.value=0,R.value=!0},edit:async e=>{R.value=!0,U.value=e;const l=await(t={id:e},a.get("/App/getDetail",t));var t;l.data.price=1*l.data.price,Object.assign(z,l.data)}}),(a,t)=>{const o=i("a-option"),d=i("a-select"),n=i("a-form-item"),V=i("a-input"),h=i("a-input-number"),w=e,D=i("a-textarea"),A=i("a-tag"),U=i("a-space"),M=i("a-button"),F=i("a-table-column"),$=i("a-popconfirm"),B=i("a-table"),G=i("a-switch"),L=i("a-form"),Y=i("a-modal");return u(),s(Y,{visible:m(R),"onUpdate:visible":t[10]||(t[10]=e=>y(R)?R.value=e:null),title:m(j),width:"90%","mask-closable":!1,"unmount-on-close":"","modal-style":{maxWidth:"55vW",maxHeight:"70vh",overflowY:"auto"},onBeforeOk:S,onClose:H},{default:r((()=>[c(L,{ref_key:"formRef",ref:C,model:m(z),rules:O,size:"medium","auto-label-width":""},{default:r((()=>[c(n,{label:"ÊâÄÂ±ûÂàÜÁ±ª",field:"type"},{default:r((()=>[c(d,{placeholder:"ËØ∑ÈÄâÊã©ÂàÜÁ±ª",modelValue:m(z).type,"onUpdate:modelValue":t[0]||(t[0]=e=>m(z).type=e)},{default:r((()=>[(u(!0),p(f,null,_(m(k),(e=>(u(),s(o,{value:e.value,label:e.label},null,8,["value","label"])))),256))])),_:1},8,["modelValue"])])),_:1}),c(n,{label:"ÊñáÁ´†Ê†áÈ¢ò",field:"title"},{default:r((()=>[c(V,{modelValue:m(z).title,"onUpdate:modelValue":t[1]||(t[1]=e=>m(z).title=e),modelModifiers:{trim:!0},placeholder:"ËØ∑ËæìÂÖ•ÊñáÁ´†Ê†áÈ¢ò","allow-clear":""},null,8,["modelValue"])])),_:1}),c(n,{label:"ÊñáÁ´†ÂâØÊ†áÈ¢ò",field:"sub_title"},{default:r((()=>[c(V,{modelValue:m(z).sub_title,"onUpdate:modelValue":t[2]||(t[2]=e=>m(z).sub_title=e),modelModifiers:{trim:!0},placeholder:"ËØ∑ËæìÂÖ•ÊñáÁ´†ÂâØÊ†áÈ¢ò","allow-clear":""},null,8,["modelValue"])])),_:1}),c(n,{label:"Êâ£Èô§ÁÆóÂäõ",field:"points"},{default:r((()=>[c(h,{modelValue:m(z).points,"onUpdate:modelValue":t[3]||(t[3]=e=>m(z).points=e),placeholder:"ËØ∑ËæìÂÖ•",min:0},null,8,["modelValue"])])),_:1}),c(n,{label:"ÂõæÊ†á",field:"image"},{default:r((()=>[c(w,{modelValue:m(z).image,"onUpdate:modelValue":t[4]||(t[4]=e=>m(z).image=e)},null,8,["modelValue"])])),_:1}),c(n,{label:"ÊéíÂ∫èÔºàÂ∞èÂà∞Â§ßÔºâ",field:"sort"},{default:r((()=>[c(h,{modelValue:m(z).sort,"onUpdate:modelValue":t[5]||(t[5]=e=>m(z).sort=e),modelModifiers:{trim:!0},placeholder:"ËØ∑ËæìÂÖ•ÊéíÂ∫èÔºàÂ∞èÂà∞Â§ßÔºâ","allow-clear":""},null,8,["modelValue"])])),_:1}),"oralCopy"==m(z).type?(u(),s(n,{key:0,label:"ËßíËâ≤Êåá‰ª§",field:"role_instruct"},{default:r((()=>[c(D,{modelValue:m(z).role_instruct,"onUpdate:modelValue":t[6]||(t[6]=e=>m(z).role_instruct=e),"auto-size":""},null,8,["modelValue"])])),_:1})):b("",!0),"oralCopy"==m(z).type?(u(),s(n,{key:1,label:"ÂÜÖÂÆπÊåá‰ª§",field:"content_instruct"},{default:r((()=>[c(U,{direction:"vertical",fill:!0,style:{width:"100%"}},{default:r((()=>[c(D,{modelValue:m(z).content_instruct,"onUpdate:modelValue":t[7]||(t[7]=e=>m(z).content_instruct=e),"auto-size":"",placeholder:"ËØ∑ËæìÂÖ•ÂÜÖÂÆπÊåá‰ª§"},null,8,["modelValue"]),c(U,null,{default:r((()=>[(u(!0),p(f,null,_(m(z).tableData,((e,l)=>(u(),s(A,{onClick:l=>{return a=e,void(z.content_instruct+="${"+a.field+"}");var a},color:"green"},{default:r((()=>[v(g(e.field_title),1)])),_:2},1032,["onClick"])))),256))])),_:1})])),_:1})])),_:1})):b("",!0),"oralCopy"==m(z).type?(u(),s(n,{key:2,label:"Ë°®ÂçïÊî∂ÈõÜ",field:"tableData"},{default:r((()=>[c(U,{direction:"vertical"},{default:r((()=>[c(M,{onClick:t[8]||(t[8]=e=>m(q).add())},{default:r((()=>t[11]||(t[11]=[v("Êñ∞Â¢û")]))),_:1}),c(B,{data:m(z).tableData,pagination:!1},{columns:r((()=>[c(F,{title:"Â≠óÊÆµ","data-index":"field"}),c(F,{title:"Â≠óÊÆµÊ†áÈ¢ò","data-index":"field_title"}),c(F,{title:"Á±ªÂûã",align:"center"},{cell:r((({record:e})=>[c(A,{color:"arcoblue"},{default:r((()=>[v(g(m(x)(e.type,"Component")),1)])),_:2},1024)])),_:1}),c(F,{title:"ÊòØÂê¶ÂøÖÂ°´",align:"requie"},{cell:r((({record:e})=>[c(A,{color:"arcoblue"},{default:r((()=>[v(g(1==e.requie?"ÊòØ":"Âê¶"),1)])),_:2},1024)])),_:1}),c(F,{title:"ÈªòËÆ§ÂÄº","data-index":"default"}),c(F,{title:"Âç†‰ΩçÁ¨¶","data-index":"placeholder"}),c(F,{title:"Êìç‰Ωú",align:"center"},{cell:r((({record:e})=>[c(U,null,{default:r((()=>[c(M,{type:"text",size:"mini",onClick:l=>m(q).edit(e)},{default:r((()=>t[12]||(t[12]=[v(" ÁºñËæë ")]))),_:2},1032,["onClick"]),c($,{type:"warning",content:"Á°ÆÂÆöÂà†Èô§ËØ•Êï∞ÊçÆÂêó?",onOk:l=>{return a=e.id,void(z.tableData=z.tableData.filter((e=>e.id!==a)));var a}},{default:r((()=>[c(M,{type:"text",status:"danger",size:"mini"},{default:r((()=>t[13]||(t[13]=[v(" Âà†Èô§ ")]))),_:1})])),_:2},1032,["onOk"])])),_:2},1024)])),_:1})])),_:1},8,["data"])])),_:1})])),_:1})):b("",!0),c(n,{label:"Áä∂ÊÄÅ",field:"status"},{default:r((()=>[c(G,{modelValue:m(z).status,"onUpdate:modelValue":t[9]||(t[9]=e=>m(z).status=e),type:"round","checked-value":1,"unchecked-value":0,"checked-text":"Ê≠£Â∏∏","unchecked-text":"Á¶ÅÁî®"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),c(l,{ref_key:"AddFormModalRef",ref:q,onSaveSuccess:W},null,512)])),_:1},8,["visible","title"])}}});export{q as _,D as d,w as g};
