import{_ as a}from"./GiCellStatus.vue_vue_type_script_setup_true_lang-42nqT8v4.js";import{_ as e}from"./AddPlansModal.vue_vue_type_script_setup_true_lang-D659P5HS.js";import{d as t,M as i,Y as l,a2 as s,g as d,o as n,a as o,w as r,j as u,k as c,i as p,G as _,t as m,$ as f}from"./index-PFxU9JJn.js";import{d as g,a as v}from"./plans-DGn3f3tB.js";import"./useResetReactive-C9BdlN97.js";const x=t({__name:"index",setup(t){const x=i("AddPlansModalRef");l({title:"",status:""});const{loading:b,tableData:w,pagination:y,search:h,fixed:k}=s((a=>v(a)),{immediate:!0}),j=()=>{var a;null==(a=x.value)||a.add()};return(t,i)=>{const l=d("icon-plus"),s=d("a-button"),v=d("a-space"),S=d("a-row"),C=d("a-table-column"),M=a,R=d("icon-edit"),A=d("icon-delete"),P=d("a-popconfirm"),z=d("a-table"),G=d("a-card");return n(),o(G,{title:"套餐管理",class:"gi_page_card"},{default:r((()=>[u(S,null,{default:r((()=>[u(v,{wrap:""},{default:r((()=>[u(s,{type:"primary",onClick:j},{icon:r((()=>[u(l)])),default:r((()=>[i[0]||(i[0]=c("span",null,"新增",-1))])),_:1})])),_:1})])),_:1}),u(z,{class:"gi_table","row-key":"id",data:p(w),bordered:{cell:!0},loading:p(b),scroll:{x:"100%",y:"100%",minWidth:1200},pagination:p(y)},{columns:r((()=>[u(C,{title:"序号",width:64},{cell:r((a=>[_(m(a.rowIndex+1),1)])),_:1}),u(C,{title:"套餐名称","data-index":"title"}),u(C,{title:"套餐售价","data-index":"price",width:150}),u(C,{title:"原价","data-index":"original_price",width:150}),u(C,{title:"套餐点数","data-index":"points",ellipsis:!0,tooltip:!0}),u(C,{title:"赠送点数","data-index":"give",ellipsis:!0,tooltip:!0}),u(C,{title:"状态",width:100,align:"center"},{cell:r((({record:a})=>[u(M,{status:a.status},null,8,["status"])])),_:1}),u(C,{title:"排序","data-index":"sort"}),u(C,{title:"创建时间","data-index":"create_time",width:180}),u(C,{title:"操作",width:280,align:"center",fixed:p(k)},{cell:r((({record:a})=>[u(v,null,{default:r((()=>[u(s,{type:"primary",size:"mini",disabled:a.disabled,onClick:e=>{return t=a,void(null==(i=x.value)||i.edit(t.id));var t,i}},{icon:r((()=>[u(R)])),default:r((()=>[i[1]||(i[1]=c("span",null,"编辑",-1))])),_:2},1032,["disabled","onClick"]),u(P,{type:"warning",content:"确定删除该套餐吗?",onOk:e=>{return t=a.id,void g({id:t}).then((a=>{f.success("删除成功"),h()})).catch((a=>{f.error(a.message)}));var t}},{default:r((()=>[u(s,{type:"primary",status:"danger",size:"mini",disabled:a.disabled},{icon:r((()=>[u(A)])),default:r((()=>[i[2]||(i[2]=c("span",null,"删除",-1))])),_:2},1032,["disabled"])])),_:2},1032,["onOk"])])),_:2},1024)])),_:1},8,["fixed"])])),_:1},8,["data","loading","pagination"]),u(e,{ref_key:"AddPlansModalRef",ref:x,onSaveSuccess:p(h)},null,8,["onSaveSuccess"])])),_:1})}}});export{x as default};
