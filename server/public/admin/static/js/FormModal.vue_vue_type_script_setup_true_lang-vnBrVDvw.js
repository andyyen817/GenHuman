import{d as e,M as l,f as a,c as d,g as o,o as u,a as t,w as i,j as r,i as s,G as n,h as m,F as f,l as c,k as p,t as v,b as h,H as _}from"./index-DjSAiWeD.js";import{u as V}from"./useResetReactive-A9W2fVr9.js";const b=e({__name:"FormModal",emits:["save-success"],setup(e,{expose:b,emit:y}){const k=l("formRef"),w=a(""),x=d((()=>!!w.value)),U=d((()=>(x.value,"表单信息收集"))),M=a(!1),g=a({label:"",value:""}),[q,j]=V({id:0,type:"input",require:0,field:"",field_title:"",placeholder:"",default:"",option:[]}),C=y,R={type:[{required:!0,message:"请选择类型"}],field:[{required:!0,message:"请输入字段"}],field_title:[{required:!0,message:"请输入字段名称"}]},F=()=>{var e;null==(e=k.value)||e.resetFields(),j()},H=async()=>{var e;try{if(await(null==(e=k.value)?void 0:e.validate()))return!1;C("save-success",{...q})}catch(l){return!1}},O=()=>{q.option.push({...g.value}),g.value.label="",g.value.value=""};return b({add:()=>{w.value="",q.id=Math.floor(1e4*Math.random()),M.value=!0},edit:async e=>{M.value=!0,w.value=e.id,Object.assign(q,e)}}),(e,l)=>{const a=o("a-radio"),d=o("a-radio-group"),V=o("a-form-item"),b=o("a-switch"),y=o("a-input"),w=o("icon-close"),x=o("a-space"),j=o("a-button"),C=o("a-form"),W=o("a-modal");return u(),t(W,{visible:s(M),"onUpdate:visible":l[8]||(l[8]=e=>_(M)?M.value=e:null),title:s(U),width:"90%","mask-closable":!1,"unmount-on-close":"","modal-style":{maxWidth:"35vW",maxHeight:"70vh",overflowY:"auto"},onBeforeOk:H,onClose:F},{default:i((()=>[r(C,{ref_key:"formRef",ref:k,model:s(q),rules:R,size:"medium","auto-label-width":""},{default:i((()=>[r(V,{label:"类型",field:"type"},{default:i((()=>[r(d,{type:"button",modelValue:s(q).type,"onUpdate:modelValue":l[0]||(l[0]=e=>s(q).type=e)},{default:i((()=>[r(a,{value:"input"},{default:i((()=>l[9]||(l[9]=[n("输入框")]))),_:1}),r(a,{value:"radio"},{default:i((()=>l[10]||(l[10]=[n("单选框")]))),_:1}),r(a,{value:"checkbox"},{default:i((()=>l[11]||(l[11]=[n("多选")]))),_:1}),r(a,{value:"textarea"},{default:i((()=>l[12]||(l[12]=[n("文本域")]))),_:1})])),_:1},8,["modelValue"])])),_:1}),r(V,{label:"是否必填",field:"require"},{default:i((()=>[r(b,{modelValue:s(q).require,"onUpdate:modelValue":l[1]||(l[1]=e=>s(q).require=e),type:"round","checked-value":1,"unchecked-value":0,"checked-text":"必填","unchecked-text":"非必填"},null,8,["modelValue"])])),_:1}),r(V,{label:"字段",field:"field"},{default:i((()=>[r(y,{modelValue:s(q).field,"onUpdate:modelValue":l[2]||(l[2]=e=>s(q).field=e),modelModifiers:{trim:!0},placeholder:"请输入字段","allow-clear":""},null,8,["modelValue"])])),_:1}),r(V,{label:"字段名称",field:"field_title"},{default:i((()=>[r(y,{modelValue:s(q).field_title,"onUpdate:modelValue":l[3]||(l[3]=e=>s(q).field_title=e),modelModifiers:{trim:!0},placeholder:"请输入字段名称","allow-clear":""},null,8,["modelValue"])])),_:1}),r(V,{label:"占位符",field:"placeholder"},{default:i((()=>[r(y,{modelValue:s(q).placeholder,"onUpdate:modelValue":l[4]||(l[4]=e=>s(q).placeholder=e),modelModifiers:{trim:!0},placeholder:"请输入提示占位符","allow-clear":""},null,8,["modelValue"])])),_:1}),r(V,{label:"默认值",field:"default"},{default:i((()=>[r(y,{modelValue:s(q).default,"onUpdate:modelValue":l[5]||(l[5]=e=>s(q).default=e),modelModifiers:{trim:!0},placeholder:"请输入默认值","allow-clear":""},null,8,["modelValue"])])),_:1}),"radio"==s(q).type||"checkbox"==s(q).type?(u(),t(V,{key:0},{default:i((()=>[r(x,{direction:"vertical"},{default:i((()=>[(u(!0),m(f,null,c(s(q).option,((e,l)=>(u(),t(x,{key:l},{default:i((()=>[p("span",null,v(e.label),1),p("span",null,v(e.value),1),r(w,{style:{color:"red"},onClick:e=>s(q).option.splice(l,1)},null,8,["onClick"])])),_:2},1024)))),128)),r(x,null,{default:i((()=>[r(y,{placeholder:"选项名称",modelValue:s(g).label,"onUpdate:modelValue":l[6]||(l[6]=e=>s(g).label=e)},null,8,["modelValue"]),l[14]||(l[14]=n("- ")),r(y,{placeholder:"选项值",modelValue:s(g).value,"onUpdate:modelValue":l[7]||(l[7]=e=>s(g).value=e)},null,8,["modelValue"]),r(j,{type:"primary",onClick:O},{default:i((()=>l[13]||(l[13]=[n("添加")]))),_:1})])),_:1})])),_:1})])),_:1})):h("",!0)])),_:1},8,["model"])])),_:1},8,["visible","title"])}}});export{b as _};
