function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["static/js/FileList-P7s3LS-a.js","static/js/index-CyyHvq4l.js","static/css/index-DaumpGxb.css","static/js/index-EX7goJwW.js","static/css/index-B647mp6F.css","static/js/index-Dcn4iyj2.js","static/js/index-DdTzEE7R.js","static/js/AudioModalContent.vue_vue_type_style_index_0_scoped_a0590cf0_lang-YA0YoIMp.js","static/css/AudioModalContent-y8409Y6T.css","static/js/index-BynsH5MT.js","static/js/index-CIhzolbU.js","static/css/index-Ccl1n3_x.css","static/css/FileList-MmYcGYS8.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{_ as e}from"./index-EX7goJwW.js";import{d as t,f as i,g as n,o,h as a,j as r,w as s,G as l,F as c,l as u,i as h,a as d,k as f,t as m,_ as p,ad as v,eS as g,N as b,$ as y,c as w,E as x,b as k,z as I,eT as _,A as j,B as O,eU as T,n as E,p as z,eV as S,eW as A,eN as D,eX as C,eY as F,ab as R,eZ as M,H as L}from"./index-CyyHvq4l.js";import{e as P,g as N,d as Y,a as X,u as q}from"./index-Dcn4iyj2.js";import{p as W}from"./index-DdTzEE7R.js";import{p as B}from"./index-BynsH5MT.js";import{_ as V}from"./index-CIhzolbU.js";const H=[{name:"全部",value:"0",menuIcon:"menu-file",icon:"icon-stamp"},{name:"图片",value:"1",menuIcon:"file-image",icon:"icon-file-image"},{name:"音频",value:"2",menuIcon:"file-txt",icon:"icon-file-audio"},{name:"视频",value:"3",menuIcon:"file-video",icon:"icon-video-camera"},{name:"文档",value:"4",menuIcon:"file-music",icon:"icon-file"},{name:"其他",value:"5",menuIcon:"file-other",icon:"icon-bulb"}],U={mp3:"file-music",mp4:"file-video",dir:"file-dir",ppt:"file-ppt",doc:"file-wps",docx:"file-wps",xls:"file-excel",xlsx:"file-excel",txt:"file-txt",rar:"file-rar",zip:"file-zip",html:"file-html",css:"file-css",js:"file-js",other:"file-other"},$=["jpg","png","gif","jpeg"],G=p(t({__name:"FileAside",emits:["change"],setup(t,{emit:p}){const v=i("0"),g=p;return(t,i)=>{const p=n("icon-apps"),b=e,y=n("a-menu-item"),w=n("a-sub-menu"),x=n("a-menu"),k=n("a-card");return o(),a("div",null,[r(k,{title:"文件类型",bordered:!1,"body-style":{padding:0}},{default:s((()=>[r(x,{"default-open-keys":["0"],"selected-keys":[v.value]},{default:s((()=>[r(w,{key:"0"},{icon:s((()=>[r(p)])),title:s((()=>i[0]||(i[0]=[l("文件类型")]))),default:s((()=>[(o(!0),a(c,null,u(h(H),(e=>(o(),d(y,{key:e.value.toString(),onClick:t=>(e=>{v.value=e.value,g("change",e.value)})(e)},{icon:s((()=>[r(b,{size:28,name:e.menuIcon},null,8,["name"])])),default:s((()=>[f("span",null,m(e.name),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1},8,["selected-keys"])])),_:1})])}}}),[["__scopeId","data-v-d10e989b"]]);function Z(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function K(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(i),!0).forEach((function(t){ee(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Z(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,te(n.key),n)}}function ee(e,t,i){return(t=te(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function te(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var ie={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,inheritedAttributes:["crossOrigin","decoding","isMap","loading","referrerPolicy","sizes","srcset","useMap"],initialCoverage:.9,initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,focus:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,move:null,moved:null,rotate:null,rotated:null,scale:null,scaled:null,zoom:null,zoomed:null,play:null,stop:null},ne="undefined"!=typeof window&&void 0!==window.document,oe=ne?window:{},ae=!(!ne||!oe.document.documentElement)&&"ontouchstart"in oe.document.documentElement,re=!!ne&&"PointerEvent"in oe,se="viewer",le="move",ce="switch",ue="zoom",he="".concat(se,"-active"),de="".concat(se,"-close"),fe="".concat(se,"-fade"),me="".concat(se,"-fixed"),pe="".concat(se,"-fullscreen"),ve="".concat(se,"-fullscreen-exit"),ge="".concat(se,"-hide"),be="".concat(se,"-hide-md-down"),ye="".concat(se,"-hide-sm-down"),we="".concat(se,"-hide-xs-down"),xe="".concat(se,"-in"),ke="".concat(se,"-invisible"),Ie="".concat(se,"-loading"),_e="".concat(se,"-move"),je="".concat(se,"-open"),Oe="".concat(se,"-show"),Te="".concat(se,"-transition"),Ee="click",ze="dblclick",Se="dragstart",Ae="focusin",De="keydown",Ce="load",Fe="error",Re=re?"pointerdown":ae?"touchstart":"mousedown",Me=re?"pointermove":ae?"touchmove":"mousemove",Le=re?"pointerup pointercancel":ae?"touchend touchcancel":"mouseup",Pe="resize",Ne="transitionend",Ye="wheel",Xe="ready",qe="show",We="shown",Be="hide",Ve="hidden",He="view",Ue="viewed",$e="move",Ge="moved",Ze="rotate",Ke="rotated",Je="scale",Qe="scaled",et="zoom",tt="zoomed",it="play",nt="stop",ot="".concat(se,"Action"),at=/\s\s*/,rt=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"];function st(e){return"string"==typeof e}var lt=Number.isNaN||oe.isNaN;function ct(e){return"number"==typeof e&&!lt(e)}function ut(e){return void 0===e}function ht(e){return"object"===J(e)&&null!==e}var dt=Object.prototype.hasOwnProperty;function ft(e){if(!ht(e))return!1;try{var t=e.constructor,i=t.prototype;return t&&i&&dt.call(i,"isPrototypeOf")}catch(n){return!1}}function mt(e){return"function"==typeof e}function pt(e,t){if(e&&mt(t))if(Array.isArray(e)||ct(e.length)){var i,n=e.length;for(i=0;i<n&&!1!==t.call(e,e[i],i,e);i+=1);}else ht(e)&&Object.keys(e).forEach((function(i){t.call(e,e[i],i,e)}));return e}var vt=Object.assign||function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return ht(e)&&i.length>0&&i.forEach((function(t){ht(t)&&Object.keys(t).forEach((function(i){e[i]=t[i]}))})),e},gt=/^(?:width|height|left|top|marginLeft|marginTop)$/;function bt(e,t){var i=e.style;pt(t,(function(e,t){gt.test(t)&&ct(e)&&(e+="px"),i[t]=e}))}function yt(e,t){return!(!e||!t)&&(e.classList?e.classList.contains(t):e.className.indexOf(t)>-1)}function wt(e,t){if(e&&t)if(ct(e.length))pt(e,(function(e){wt(e,t)}));else if(e.classList)e.classList.add(t);else{var i=e.className.trim();i?i.indexOf(t)<0&&(e.className="".concat(i," ").concat(t)):e.className=t}}function xt(e,t){e&&t&&(ct(e.length)?pt(e,(function(e){xt(e,t)})):e.classList?e.classList.remove(t):e.className.indexOf(t)>=0&&(e.className=e.className.replace(t,"")))}function kt(e,t,i){t&&(ct(e.length)?pt(e,(function(e){kt(e,t,i)})):i?wt(e,t):xt(e,t))}var It=/([a-z\d])([A-Z])/g;function _t(e){return e.replace(It,"$1-$2").toLowerCase()}function jt(e,t){return ht(e[t])?e[t]:e.dataset?e.dataset[t]:e.getAttribute("data-".concat(_t(t)))}function Ot(e,t,i){ht(i)?e[t]=i:e.dataset?e.dataset[t]=i:e.setAttribute("data-".concat(_t(t)),i)}var Tt=function(){var e=!1;if(ne){var t=!1,i=function(){},n=Object.defineProperty({},"once",{get:function(){return e=!0,t},set:function(e){t=e}});oe.addEventListener("test",i,n),oe.removeEventListener("test",i,n)}return e}();function Et(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i;t.trim().split(at).forEach((function(t){if(!Tt){var a=e.listeners;a&&a[t]&&a[t][i]&&(o=a[t][i],delete a[t][i],0===Object.keys(a[t]).length&&delete a[t],0===Object.keys(a).length&&delete e.listeners)}e.removeEventListener(t,o,n)}))}function zt(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i;t.trim().split(at).forEach((function(t){if(n.once&&!Tt){var a=e.listeners,r=void 0===a?{}:a;o=function(){delete r[t][i],e.removeEventListener(t,o,n);for(var a=arguments.length,s=new Array(a),l=0;l<a;l++)s[l]=arguments[l];i.apply(e,s)},r[t]||(r[t]={}),r[t][i]&&e.removeEventListener(t,r[t][i],n),r[t][i]=o,e.listeners=r}e.addEventListener(t,o,n)}))}function St(e,t,i,n){var o;return mt(Event)&&mt(CustomEvent)?o=new CustomEvent(t,K({bubbles:!0,cancelable:!0,detail:i},n)):(o=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,i),e.dispatchEvent(o)}function At(e){var t=e.rotate,i=e.scaleX,n=e.scaleY,o=e.translateX,a=e.translateY,r=[];ct(o)&&0!==o&&r.push("translateX(".concat(o,"px)")),ct(a)&&0!==a&&r.push("translateY(".concat(a,"px)")),ct(t)&&0!==t&&r.push("rotate(".concat(t,"deg)")),ct(i)&&1!==i&&r.push("scaleX(".concat(i,")")),ct(n)&&1!==n&&r.push("scaleY(".concat(n,")"));var s=r.length?r.join(" "):"none";return{WebkitTransform:s,msTransform:s,transform:s}}var Dt=oe.navigator&&/Version\/\d+(\.\d+)+?\s+Safari/i.test(oe.navigator.userAgent);function Ct(e,t,i){var n=document.createElement("img");if(e.naturalWidth&&!Dt)return i(e.naturalWidth,e.naturalHeight),n;var o=document.body||document.documentElement;return n.onload=function(){i(n.width,n.height),Dt||o.removeChild(n)},pt(t.inheritedAttributes,(function(t){var i=e.getAttribute(t);null!==i&&n.setAttribute(t,i)})),n.src=e.src,Dt||(n.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(n)),n}function Ft(e){switch(e){case 2:return we;case 3:return ye;case 4:return be;default:return""}}function Rt(e,t){var i=e.pageX,n=e.pageY,o={endX:i,endY:n};return t?o:K({timeStamp:Date.now(),startX:i,startY:n},o)}var Mt={render:function(){this.initContainer(),this.initViewer(),this.initList(),this.renderViewer()},initBody:function(){var e=this.element.ownerDocument,t=e.body||e.documentElement;this.body=t,this.scrollbarWidth=window.innerWidth-e.documentElement.clientWidth,this.initialBodyPaddingRight=t.style.paddingRight,this.initialBodyComputedPaddingRight=window.getComputedStyle(t).paddingRight},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var e,t=this.options,i=this.parent;t.inline&&(e={width:Math.max(i.offsetWidth,t.minWidth),height:Math.max(i.offsetHeight,t.minHeight)},this.parentData=e),!this.fulled&&e||(e=this.containerData),this.viewerData=vt({},e)},renderViewer:function(){this.options.inline&&!this.fulled&&bt(this.viewer,this.viewerData)},initList:function(){var e=this,t=this.element,i=this.options,n=this.list,o=[];n.innerHTML="",pt(this.images,(function(t,a){var r=t.src,s=t.alt||function(e){return st(e)?decodeURIComponent(e.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""}(r),l=e.getImageURL(t);if(r||l){var c=document.createElement("li"),u=document.createElement("img");pt(i.inheritedAttributes,(function(e){var i=t.getAttribute(e);null!==i&&u.setAttribute(e,i)})),i.navbar&&(u.src=r||l),u.alt=s,u.setAttribute("data-original-url",l||r),c.setAttribute("data-index",a),c.setAttribute("data-viewer-action","view"),c.setAttribute("role","button"),i.keyboard&&c.setAttribute("tabindex",0),c.appendChild(u),n.appendChild(c),o.push(c)}})),this.items=o,pt(o,(function(t){var n,o,a=t.firstElementChild;Ot(a,"filled",!0),i.loading&&wt(t,Ie),zt(a,Ce,n=function(n){Et(a,Fe,o),i.loading&&xt(t,Ie),e.loadImage(n)},{once:!0}),zt(a,Fe,o=function(){Et(a,Ce,n),i.loading&&xt(t,Ie)},{once:!0})})),i.transition&&zt(t,Ue,(function(){wt(n,Te)}),{once:!0})},renderList:function(){var e=this.index,t=this.items[e];if(t){var i=t.nextElementSibling,n=parseInt(window.getComputedStyle(i||t).marginLeft,10),o=t.offsetWidth,a=o+n;bt(this.list,vt({width:a*this.length-n},At({translateX:(this.viewerData.width-o)/2-a*e})))}},resetList:function(){var e=this.list;e.innerHTML="",xt(e,Te),bt(e,At({translateX:0}))},initImage:function(e){var t,i=this,n=this.options,o=this.image,a=this.viewerData,r=this.footer.offsetHeight,s=a.width,l=Math.max(a.height-r,r),c=this.imageData||{};this.imageInitializing={abort:function(){t.onload=null}},t=Ct(o,n,(function(t,o){var a=t/o,r=Math.max(0,Math.min(1,n.initialCoverage)),u=s,h=l;i.imageInitializing=!1,l*a>s?h=s/a:u=l*a,r=ct(r)?r:.9,u=Math.min(u*r,t),h=Math.min(h*r,o);var d=(s-u)/2,f=(l-h)/2,m={left:d,top:f,x:d,y:f,width:u,height:h,oldRatio:1,ratio:u/t,aspectRatio:a,naturalWidth:t,naturalHeight:o},p=vt({},m);n.rotatable&&(m.rotate=c.rotate||0,p.rotate=0),n.scalable&&(m.scaleX=c.scaleX||1,m.scaleY=c.scaleY||1,p.scaleX=1,p.scaleY=1),i.imageData=m,i.initialImageData=p,e&&e()}))},renderImage:function(e){var t=this,i=this.image,n=this.imageData;if(bt(i,vt({width:n.width,height:n.height,marginLeft:n.x,marginTop:n.y},At(n))),e)if((this.viewing||this.moving||this.rotating||this.scaling||this.zooming)&&this.options.transition&&yt(i,Te)){var o=function(){t.imageRendering=!1,e()};this.imageRendering={abort:function(){Et(i,Ne,o)}},zt(i,Ne,o,{once:!0})}else e()},resetImage:function(){var e=this.image;e&&(this.viewing&&this.viewing.abort(),e.parentNode.removeChild(e),this.image=null,this.title.innerHTML="")}},Lt={bind:function(){var e=this.options,t=this.viewer,i=this.canvas,n=this.element.ownerDocument;zt(t,Ee,this.onClick=this.click.bind(this)),zt(t,Se,this.onDragStart=this.dragstart.bind(this)),zt(i,Re,this.onPointerDown=this.pointerdown.bind(this)),zt(n,Me,this.onPointerMove=this.pointermove.bind(this)),zt(n,Le,this.onPointerUp=this.pointerup.bind(this)),zt(n,De,this.onKeyDown=this.keydown.bind(this)),zt(window,Pe,this.onResize=this.resize.bind(this)),e.zoomable&&e.zoomOnWheel&&zt(t,Ye,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),e.toggleOnDblclick&&zt(i,ze,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var e=this.options,t=this.viewer,i=this.canvas,n=this.element.ownerDocument;Et(t,Ee,this.onClick),Et(t,Se,this.onDragStart),Et(i,Re,this.onPointerDown),Et(n,Me,this.onPointerMove),Et(n,Le,this.onPointerUp),Et(n,De,this.onKeyDown),Et(window,Pe,this.onResize),e.zoomable&&e.zoomOnWheel&&Et(t,Ye,this.onWheel,{passive:!1,capture:!0}),e.toggleOnDblclick&&Et(i,ze,this.onDblclick)}},Pt={click:function(e){var t=this.options,i=this.imageData,n=e.target,o=jt(n,ot);switch(o||"img"!==n.localName||"li"!==n.parentElement.localName||(o=jt(n=n.parentElement,ot)),ae&&e.isTrusted&&n===this.canvas&&clearTimeout(this.clickCanvasTimeout),o){case"mix":this.played?this.stop():t.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.pointerMoved||this.hide();break;case"view":this.view(jt(n,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(t.loop);break;case"play":this.play(t.fullscreen);break;case"next":this.next(t.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-i.scaleX||-1);break;case"flip-vertical":this.scaleY(-i.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(e){e.preventDefault(),this.viewed&&e.target===this.image&&(ae&&e.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle(e.isTrusted?e:e.detail&&e.detail.originalEvent))},load:function(){var e=this;this.timeout&&(clearTimeout(this.timeout),this.timeout=!1);var t=this.element,i=this.options,n=this.image,o=this.index,a=this.viewerData;xt(n,ke),i.loading&&xt(this.canvas,Ie),n.style.cssText="height:0;"+"margin-left:".concat(a.width/2,"px;")+"margin-top:".concat(a.height/2,"px;")+"max-width:none!important;position:relative;width:0;",this.initImage((function(){kt(n,_e,i.movable),kt(n,Te,i.transition),e.renderImage((function(){e.viewed=!0,e.viewing=!1,mt(i.viewed)&&zt(t,Ue,i.viewed,{once:!0}),St(t,Ue,{originalImage:e.images[o],index:o,image:n},{cancelable:!1})}))}))},loadImage:function(e){var t=e.target,i=t.parentNode,n=i.offsetWidth||30,o=i.offsetHeight||50,a=!!jt(t,"filled");Ct(t,this.options,(function(e,i){var r=e/i,s=n,l=o;o*r>n?a?s=o*r:l=n/r:a?l=n/r:s=o*r,bt(t,vt({width:s,height:l},At({translateX:(n-s)/2,translateY:(o-l)/2})))}))},keydown:function(e){var t=this.options;if(t.keyboard){var i=e.keyCode||e.which||e.charCode;if(13===i)this.viewer.contains(e.target)&&this.click(e);if(this.fulled)switch(i){case 27:this.played?this.stop():t.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.played&&this.playing?this.playing.prev():this.prev(t.loop);break;case 38:e.preventDefault(),this.zoom(t.zoomRatio,!0);break;case 39:this.played&&this.playing?this.playing.next():this.next(t.loop);break;case 40:e.preventDefault(),this.zoom(-t.zoomRatio,!0);break;case 48:case 49:e.ctrlKey&&(e.preventDefault(),this.toggle())}}},dragstart:function(e){"img"===e.target.localName&&e.preventDefault()},pointerdown:function(e){var t=this.options,i=this.pointers,n=e.buttons,o=e.button;if(this.pointerMoved=!1,!(!this.viewed||this.showing||this.viewing||this.hiding||("mousedown"===e.type||"pointerdown"===e.type&&"mouse"===e.pointerType)&&(ct(n)&&1!==n||ct(o)&&0!==o||e.ctrlKey))){e.preventDefault(),e.changedTouches?pt(e.changedTouches,(function(e){i[e.identifier]=Rt(e)})):i[e.pointerId||0]=Rt(e);var a=!!t.movable&&le;t.zoomOnTouch&&t.zoomable&&Object.keys(i).length>1?a=ue:t.slideOnTouch&&("touch"===e.pointerType||"touchstart"===e.type)&&this.isSwitchable()&&(a=ce),!t.transition||a!==le&&a!==ue||xt(this.image,Te),this.action=a}},pointermove:function(e){var t=this.pointers,i=this.action;this.viewed&&i&&(e.preventDefault(),e.changedTouches?pt(e.changedTouches,(function(e){vt(t[e.identifier]||{},Rt(e,!0))})):vt(t[e.pointerId||0]||{},Rt(e,!0)),this.change(e))},pointerup:function(e){var t,i=this,n=this.options,o=this.action,a=this.pointers;e.changedTouches?pt(e.changedTouches,(function(e){t=a[e.identifier],delete a[e.identifier]})):(t=a[e.pointerId||0],delete a[e.pointerId||0]),o&&(e.preventDefault(),!n.transition||o!==le&&o!==ue||wt(this.image,Te),this.action=!1,ae&&o!==ue&&t&&Date.now()-t.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),n.toggleOnDblclick&&this.viewed&&e.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout((function(){St(i.image,ze,{originalEvent:e})}),50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout((function(){i.imageClicked=!1}),500)):(this.imageClicked=!1,n.backdrop&&"static"!==n.backdrop&&e.target===this.canvas&&(this.clickCanvasTimeout=setTimeout((function(){St(i.canvas,Ee,{originalEvent:e})}),50)))))},resize:function(){var e=this;if(this.isShown&&!this.hiding&&(this.fulled&&(this.close(),this.initBody(),this.open()),this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage((function(){e.renderImage()})),this.played)){if(this.options.fullscreen&&this.fulled&&!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement))return void this.stop();pt(this.player.getElementsByTagName("img"),(function(t){zt(t,Ce,e.loadImage.bind(e),{once:!0}),St(t,Ce)}))}},wheel:function(e){var t=this;if(this.viewed&&(e.preventDefault(),!this.wheeling)){this.wheeling=!0,setTimeout((function(){t.wheeling=!1}),50);var i=Number(this.options.zoomRatio)||.1,n=1;e.deltaY?n=e.deltaY>0?1:-1:e.wheelDelta?n=-e.wheelDelta/120:e.detail&&(n=e.detail>0?1:-1),this.zoom(-n*i,!0,null,e)}}},Nt={show:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.element,i=this.options;if(i.inline||this.showing||this.isShown||this.showing)return this;if(!this.ready)return this.build(),this.ready&&this.show(e),this;if(mt(i.show)&&zt(t,qe,i.show,{once:!0}),!1===St(t,qe)||!this.ready)return this;this.hiding&&this.transitioning.abort(),this.showing=!0,this.open();var n=this.viewer;if(xt(n,ge),n.setAttribute("role","dialog"),n.setAttribute("aria-labelledby",this.title.id),n.setAttribute("aria-modal",!0),n.removeAttribute("aria-hidden"),i.transition&&!e){var o=this.shown.bind(this);this.transitioning={abort:function(){Et(n,Ne,o),xt(n,xe)}},wt(n,Te),n.initialOffsetWidth=n.offsetWidth,zt(n,Ne,o,{once:!0}),wt(n,xe)}else wt(n,xe),this.shown();return this},hide:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=this.element,n=this.options;if(n.inline||this.hiding||!this.isShown&&!this.showing)return this;if(mt(n.hide)&&zt(i,Be,n.hide,{once:!0}),!1===St(i,Be))return this;this.showing&&this.transitioning.abort(),this.hiding=!0,this.played?this.stop():this.viewing&&this.viewing.abort();var o=this.viewer,a=this.image,r=function(){xt(o,xe),e.hidden()};if(n.transition&&!t){var s=function t(i){i&&i.target===o&&(Et(o,Ne,t),e.hidden())},l=function(){yt(o,Te)?(zt(o,Ne,s),xt(o,xe)):r()};this.transitioning={abort:function(){e.viewed&&yt(a,Te)?Et(a,Ne,l):yt(o,Te)&&Et(o,Ne,s)}},this.viewed&&yt(a,Te)?(zt(a,Ne,l,{once:!0}),this.zoomTo(0,!1,null,null,!0)):l()}else r();return this},view:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.initialViewIndex;if(t=Number(t)||0,this.hiding||this.played||t<0||t>=this.length||this.viewed&&t===this.index)return this;if(!this.isShown)return this.index=t,this.show();this.viewing&&this.viewing.abort();var i=this.element,n=this.options,o=this.title,a=this.canvas,r=this.items[t],s=r.querySelector("img"),l=jt(s,"originalUrl"),c=s.getAttribute("alt"),u=document.createElement("img");if(pt(n.inheritedAttributes,(function(e){var t=s.getAttribute(e);null!==t&&u.setAttribute(e,t)})),u.src=l,u.alt=c,mt(n.view)&&zt(i,He,n.view,{once:!0}),!1===St(i,He,{originalImage:this.images[t],index:t,image:u})||!this.isShown||this.hiding||this.played)return this;var h=this.items[this.index];h&&(xt(h,he),h.removeAttribute("aria-selected")),wt(r,he),r.setAttribute("aria-selected",!0),n.focus&&r.focus(),this.image=u,this.viewed=!1,this.index=t,this.imageData={},wt(u,ke),n.loading&&wt(a,Ie),a.innerHTML="",a.appendChild(u),this.renderList(),o.innerHTML="";var d,f,m=function(){var t,i=e.imageData,a=Array.isArray(n.title)?n.title[1]:n.title;o.innerHTML=st(t=mt(a)?a.call(e,u,i):"".concat(c," (").concat(i.naturalWidth," × ").concat(i.naturalHeight,")"))?t.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):t};return zt(i,Ue,m,{once:!0}),this.viewing={abort:function(){Et(i,Ue,m),u.complete?e.imageRendering?e.imageRendering.abort():e.imageInitializing&&e.imageInitializing.abort():(u.src="",Et(u,Ce,d),e.timeout&&clearTimeout(e.timeout))}},u.complete?this.load():(zt(u,Ce,d=function(){Et(u,Fe,f),e.load()},{once:!0}),zt(u,Fe,f=function(){Et(u,Ce,d),e.timeout&&(clearTimeout(e.timeout),e.timeout=!1),xt(u,ke),n.loading&&xt(e.canvas,Ie)},{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout((function(){xt(u,ke),e.timeout=!1}),1e3)),this},prev:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.index-1;return t<0&&(t=e?this.length-1:0),this.view(t),this},next:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.length-1,i=this.index+1;return i>t&&(i=e?0:t),this.view(i),this},move:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,i=this.imageData;return this.moveTo(ut(e)?e:i.x+Number(e),ut(t)?t:i.y+Number(t)),this},moveTo:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=this.element,a=this.options,r=this.imageData;if(e=Number(e),i=Number(i),this.viewed&&!this.played&&a.movable){var s=r.x,l=r.y,c=!1;if(ct(e)?c=!0:e=s,ct(i)?c=!0:i=l,c){if(mt(a.move)&&zt(o,$e,a.move,{once:!0}),!1===St(o,$e,{x:e,y:i,oldX:s,oldY:l,originalEvent:n}))return this;r.x=e,r.y=i,r.left=e,r.top=i,this.moving=!0,this.renderImage((function(){t.moving=!1,mt(a.moved)&&zt(o,Ge,a.moved,{once:!0}),St(o,Ge,{x:e,y:i,oldX:s,oldY:l,originalEvent:n},{cancelable:!1})}))}}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e)),this},rotateTo:function(e){var t=this,i=this.element,n=this.options,o=this.imageData;if(ct(e=Number(e))&&this.viewed&&!this.played&&n.rotatable){var a=o.rotate;if(mt(n.rotate)&&zt(i,Ze,n.rotate,{once:!0}),!1===St(i,Ze,{degree:e,oldDegree:a}))return this;o.rotate=e,this.rotating=!0,this.renderImage((function(){t.rotating=!1,mt(n.rotated)&&zt(i,Ke,n.rotated,{once:!0}),St(i,Ke,{degree:e,oldDegree:a},{cancelable:!1})}))}return this},scaleX:function(e){return this.scale(e,this.imageData.scaleY),this},scaleY:function(e){return this.scale(this.imageData.scaleX,e),this},scale:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=this.element,o=this.options,a=this.imageData;if(e=Number(e),i=Number(i),this.viewed&&!this.played&&o.scalable){var r=a.scaleX,s=a.scaleY,l=!1;if(ct(e)?l=!0:e=r,ct(i)?l=!0:i=s,l){if(mt(o.scale)&&zt(n,Je,o.scale,{once:!0}),!1===St(n,Je,{scaleX:e,scaleY:i,oldScaleX:r,oldScaleY:s}))return this;a.scaleX=e,a.scaleY=i,this.scaling=!0,this.renderImage((function(){t.scaling=!1,mt(o.scaled)&&zt(n,Qe,o.scaled,{once:!0}),St(n,Qe,{scaleX:e,scaleY:i,oldScaleX:r,oldScaleY:s},{cancelable:!1})}))}}return this},zoom:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=this.imageData;return e=(e=Number(e))<0?1/(1-e):1+e,this.zoomTo(o.width*e/o.naturalWidth,t,i,n),this},zoomTo:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=this.element,s=this.options,l=this.pointers,c=this.imageData,u=c.x,h=c.y,d=c.width,f=c.height,m=c.naturalWidth,p=c.naturalHeight;if(ct(e=Math.max(0,e))&&this.viewed&&!this.played&&(a||s.zoomable)){if(!a){var v=Math.max(.01,s.minZoomRatio),g=Math.min(100,s.maxZoomRatio);e=Math.min(Math.max(e,v),g)}if(o)switch(o.type){case"wheel":s.zoomRatio>=.055&&e>.95&&e<1.05&&(e=1);break;case"pointermove":case"touchmove":case"mousemove":e>.99&&e<1.01&&(e=1)}var b=m*e,y=p*e,w=b-d,x=y-f,k=c.ratio;if(mt(s.zoom)&&zt(r,et,s.zoom,{once:!0}),!1===St(r,et,{ratio:e,oldRatio:k,originalEvent:o}))return this;if(this.zooming=!0,o){var I=function(e){var t=e.getBoundingClientRect();return{left:t.left+(window.pageXOffset-document.documentElement.clientLeft),top:t.top+(window.pageYOffset-document.documentElement.clientTop)}}(this.viewer),_=l&&Object.keys(l).length>0?function(e){var t=0,i=0,n=0;return pt(e,(function(e){var o=e.startX,a=e.startY;t+=o,i+=a,n+=1})),{pageX:t/=n,pageY:i/=n}}(l):{pageX:o.pageX,pageY:o.pageY};c.x-=w*((_.pageX-I.left-u)/d),c.y-=x*((_.pageY-I.top-h)/f)}else ft(n)&&ct(n.x)&&ct(n.y)?(c.x-=w*((n.x-u)/d),c.y-=x*((n.y-h)/f)):(c.x-=w/2,c.y-=x/2);c.left=c.x,c.top=c.y,c.width=b,c.height=y,c.oldRatio=k,c.ratio=e,this.renderImage((function(){t.zooming=!1,mt(s.zoomed)&&zt(r,tt,s.zoomed,{once:!0}),St(r,tt,{ratio:e,oldRatio:k,originalEvent:o},{cancelable:!1})})),i&&this.tooltip()}return this},play:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isShown||this.played)return this;var i=this.element,n=this.options;if(mt(n.play)&&zt(i,it,n.play,{once:!0}),!1===St(i,it))return this;var o=this.player,a=this.loadImage.bind(this),r=[],s=0,l=0;if(this.played=!0,this.onLoadWhenPlay=a,t&&this.requestFullscreen(t),wt(o,Oe),pt(this.items,(function(e,t){var i=e.querySelector("img"),c=document.createElement("img");c.src=jt(i,"originalUrl"),c.alt=i.getAttribute("alt"),c.referrerPolicy=i.referrerPolicy,s+=1,wt(c,fe),kt(c,Te,n.transition),yt(e,he)&&(wt(c,xe),l=t),r.push(c),zt(c,Ce,a,{once:!0}),o.appendChild(c)})),ct(n.interval)&&n.interval>0){var c=function t(){clearTimeout(e.playing.timeout),xt(r[l],xe),wt(r[l=(l+=1)<s?l:0],xe),e.playing.timeout=setTimeout(t,n.interval)};s>1&&(this.playing={prev:function t(){clearTimeout(e.playing.timeout),xt(r[l],xe),wt(r[l=(l-=1)>=0?l:s-1],xe),e.playing.timeout=setTimeout(t,n.interval)},next:c,timeout:setTimeout(c,n.interval)})}return this},stop:function(){var e=this;if(!this.played)return this;var t=this.element,i=this.options;if(mt(i.stop)&&zt(t,nt,i.stop,{once:!0}),!1===St(t,nt))return this;var n=this.player;return clearTimeout(this.playing.timeout),this.playing=!1,this.played=!1,pt(n.getElementsByTagName("img"),(function(t){Et(t,Ce,e.onLoadWhenPlay)})),xt(n,Oe),n.innerHTML="",this.exitFullscreen(),this},full:function(){var e=this,t=this.options,i=this.viewer,n=this.image,o=this.list;return!this.isShown||this.played||this.fulled||!t.inline||(this.fulled=!0,this.open(),wt(this.button,ve),t.transition&&(xt(o,Te),this.viewed&&xt(n,Te)),wt(i,me),i.setAttribute("role","dialog"),i.setAttribute("aria-labelledby",this.title.id),i.setAttribute("aria-modal",!0),i.removeAttribute("style"),bt(i,{zIndex:t.zIndex}),t.focus&&this.enforceFocus(),this.initContainer(),this.viewerData=vt({},this.containerData),this.renderList(),this.viewed&&this.initImage((function(){e.renderImage((function(){t.transition&&setTimeout((function(){wt(n,Te),wt(o,Te)}),0)}))}))),this},exit:function(){var e=this,t=this.options,i=this.viewer,n=this.image,o=this.list;return this.isShown&&!this.played&&this.fulled&&t.inline?(this.fulled=!1,this.close(),xt(this.button,ve),t.transition&&(xt(o,Te),this.viewed&&xt(n,Te)),t.focus&&this.clearEnforceFocus(),i.removeAttribute("role"),i.removeAttribute("aria-labelledby"),i.removeAttribute("aria-modal"),xt(i,me),bt(i,{zIndex:t.zIndexInline}),this.viewerData=vt({},this.parentData),this.renderViewer(),this.renderList(),this.viewed&&this.initImage((function(){e.renderImage((function(){t.transition&&setTimeout((function(){wt(n,Te),wt(o,Te)}),0)}))})),this):this},tooltip:function(){var e=this,t=this.options,i=this.tooltipBox,n=this.imageData;return this.viewed&&!this.played&&t.tooltip?(i.textContent="".concat(Math.round(100*n.ratio),"%"),this.tooltipping?clearTimeout(this.tooltipping):t.transition?(this.fading&&St(i,Ne),wt(i,Oe),wt(i,fe),wt(i,Te),i.removeAttribute("aria-hidden"),i.initialOffsetWidth=i.offsetWidth,wt(i,xe)):(wt(i,Oe),i.removeAttribute("aria-hidden")),this.tooltipping=setTimeout((function(){t.transition?(zt(i,Ne,(function(){xt(i,Oe),xt(i,fe),xt(i,Te),i.setAttribute("aria-hidden",!0),e.fading=!1}),{once:!0}),xt(i,xe),e.fading=!0):(xt(i,Oe),i.setAttribute("aria-hidden",!0)),e.tooltipping=!1}),1e3),this):this},toggle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 1===this.imageData.ratio?this.zoomTo(this.imageData.oldRatio,!0,null,e):this.zoomTo(1,!0,null,e),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=vt({},this.initialImageData),this.renderImage()),this},update:function(){var e=this,t=this.element,i=this.options,n=this.isImg;if(n&&!t.parentNode)return this.destroy();var o=[];if(pt(n?[t]:t.querySelectorAll("img"),(function(t){mt(i.filter)?i.filter.call(e,t)&&o.push(t):e.getImageURL(t)&&o.push(t)})),!o.length)return this;if(this.images=o,this.length=o.length,this.ready){var a=[];if(pt(this.items,(function(e,t){var i=e.querySelector("img"),n=o[t];n&&i&&n.src===i.src&&n.alt===i.alt||a.push(t)})),bt(this.list,{width:"auto"}),this.initList(),this.isShown)if(this.length){if(this.viewed){var r=a.indexOf(this.index);if(r>=0)this.viewed=!1,this.view(Math.max(Math.min(this.index-r,this.length-1),0));else{var s=this.items[this.index];wt(s,he),s.setAttribute("aria-selected",!0)}}}else this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""}else this.build();return this},destroy:function(){var e=this.element,t=this.options;return e[se]?(this.destroyed=!0,this.ready?(this.played&&this.stop(),t.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):t.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),t.inline||Et(e,Ee,this.onStart),e[se]=void 0,this):this}},Yt={getImageURL:function(e){var t=this.options.url;return t=st(t)?e.getAttribute(t):mt(t)?t.call(this,e):""},enforceFocus:function(){var e=this;this.clearEnforceFocus(),zt(document,Ae,this.onFocusin=function(t){var i=e.viewer,n=t.target;if(n!==document&&n!==i&&!i.contains(n)){for(;n;){if(null!==n.getAttribute("tabindex")||"true"===n.getAttribute("aria-modal"))return;n=n.parentElement}i.focus()}})},clearEnforceFocus:function(){this.onFocusin&&(Et(document,Ae,this.onFocusin),this.onFocusin=null)},open:function(){var e=this.body;wt(e,je),this.scrollbarWidth>0&&(e.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px"))},close:function(){var e=this.body;xt(e,je),this.scrollbarWidth>0&&(e.style.paddingRight=this.initialBodyPaddingRight)},shown:function(){var e=this.element,t=this.options,i=this.viewer;this.fulled=!0,this.isShown=!0,this.render(),this.bind(),this.showing=!1,t.focus&&(i.focus(),this.enforceFocus()),mt(t.shown)&&zt(e,We,t.shown,{once:!0}),!1!==St(e,We)&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var e=this.element,t=this.options,i=this.viewer;t.fucus&&this.clearEnforceFocus(),this.close(),this.unbind(),wt(i,ge),i.removeAttribute("role"),i.removeAttribute("aria-labelledby"),i.removeAttribute("aria-modal"),i.setAttribute("aria-hidden",!0),this.resetList(),this.resetImage(),this.fulled=!1,this.viewed=!1,this.isShown=!1,this.hiding=!1,this.destroyed||(mt(t.hidden)&&zt(e,Ve,t.hidden,{once:!0}),St(e,Ve,null,{cancelable:!1}))},requestFullscreen:function(e){var t=this.element.ownerDocument;if(this.fulled&&!(t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement)){var i=t.documentElement;i.requestFullscreen?ft(e)?i.requestFullscreen(e):i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):i.mozRequestFullScreen?i.mozRequestFullScreen():i.msRequestFullscreen&&i.msRequestFullscreen()}},exitFullscreen:function(){var e=this.element.ownerDocument;this.fulled&&(e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement||e.msFullscreenElement)&&(e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())},change:function(e){var t=this.options,i=this.pointers,n=i[Object.keys(i)[0]];if(n){var o=n.endX-n.startX,a=n.endY-n.startY;switch(this.action){case le:0===o&&0===a||(this.pointerMoved=!0,this.move(o,a,e));break;case ue:this.zoom(function(e){var t=K({},e),i=[];return pt(e,(function(e,n){delete t[n],pt(t,(function(t){var n=Math.abs(e.startX-t.startX),o=Math.abs(e.startY-t.startY),a=Math.abs(e.endX-t.endX),r=Math.abs(e.endY-t.endY),s=Math.sqrt(n*n+o*o),l=(Math.sqrt(a*a+r*r)-s)/s;i.push(l)}))})),i.sort((function(e,t){return Math.abs(e)<Math.abs(t)})),i[0]}(i),!1,null,e);break;case ce:this.action="switched";var r=Math.abs(o);r>1&&r>Math.abs(a)&&(this.pointers={},o>1?this.prev(t.loop):o<-1&&this.next(t.loop))}pt(i,(function(e){e.startX=e.endX,e.startY=e.endY}))}},isSwitchable:function(){var e=this.imageData,t=this.viewerData;return this.length>1&&e.x>=0&&e.y>=0&&e.width<=t.width&&e.height<=t.height}},Xt=oe.Viewer,qt=function(e){return function(){return e+=1}}(-1),Wt=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t||1!==t.nodeType)throw new Error("The first argument is required and must be an element.");this.element=t,this.options=vt({},ie,ft(i)&&i),this.action=!1,this.fading=!1,this.fulled=!1,this.hiding=!1,this.imageClicked=!1,this.imageData={},this.index=this.options.initialViewIndex,this.isImg=!1,this.isShown=!1,this.length=0,this.moving=!1,this.played=!1,this.playing=!1,this.pointers={},this.ready=!1,this.rotating=!1,this.scaling=!1,this.showing=!1,this.timeout=!1,this.tooltipping=!1,this.viewed=!1,this.viewing=!1,this.wheeling=!1,this.zooming=!1,this.pointerMoved=!1,this.id=qt(),this.init()}var t,i,n;return t=e,n=[{key:"noConflict",value:function(){return window.Viewer=Xt,e}},{key:"setDefaults",value:function(e){vt(ie,ft(e)&&e)}}],(i=[{key:"init",value:function(){var e=this,t=this.element,i=this.options;if(!t[se]){t[se]=this,i.focus&&!i.keyboard&&(i.focus=!1);var n="img"===t.localName,o=[];if(pt(n?[t]:t.querySelectorAll("img"),(function(t){mt(i.filter)?i.filter.call(e,t)&&o.push(t):e.getImageURL(t)&&o.push(t)})),this.isImg=n,this.length=o.length,this.images=o,this.initBody(),ut(document.createElement(se).style.transition)&&(i.transition=!1),i.inline){var a=0,r=function(){var t;(a+=1)===e.length&&(e.initializing=!1,e.delaying={abort:function(){clearTimeout(t)}},t=setTimeout((function(){e.delaying=!1,e.build()}),0))};this.initializing={abort:function(){pt(o,(function(e){e.complete||(Et(e,Ce,r),Et(e,Fe,r))}))}},pt(o,(function(e){var t,i;e.complete?r():(zt(e,Ce,t=function(){Et(e,Fe,i),r()},{once:!0}),zt(e,Fe,i=function(){Et(e,Ce,t),r()},{once:!0}))}))}else zt(t,Ee,this.onStart=function(t){var n=t.target;"img"!==n.localName||mt(i.filter)&&!i.filter.call(e,n)||e.view(e.images.indexOf(n))})}}},{key:"build",value:function(){if(!this.ready){var e=this.element,t=this.options,i=e.parentNode,n=document.createElement("div");n.innerHTML='<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"></div><div class="viewer-footer"><div class="viewer-title"></div><div class="viewer-toolbar"></div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"></ul></div></div><div class="viewer-tooltip" role="alert" aria-hidden="true"></div><div class="viewer-button" data-viewer-action="mix" role="button"></div><div class="viewer-player"></div></div>';var o=n.querySelector(".".concat(se,"-container")),a=o.querySelector(".".concat(se,"-title")),r=o.querySelector(".".concat(se,"-toolbar")),s=o.querySelector(".".concat(se,"-navbar")),l=o.querySelector(".".concat(se,"-button")),c=o.querySelector(".".concat(se,"-canvas"));if(this.parent=i,this.viewer=o,this.title=a,this.toolbar=r,this.navbar=s,this.button=l,this.canvas=c,this.footer=o.querySelector(".".concat(se,"-footer")),this.tooltipBox=o.querySelector(".".concat(se,"-tooltip")),this.player=o.querySelector(".".concat(se,"-player")),this.list=o.querySelector(".".concat(se,"-list")),o.id="".concat(se).concat(this.id),a.id="".concat(se,"Title").concat(this.id),wt(a,t.title?Ft(Array.isArray(t.title)?t.title[0]:t.title):ge),wt(s,t.navbar?Ft(t.navbar):ge),kt(l,ge,!t.button),t.keyboard&&l.setAttribute("tabindex",0),t.backdrop&&(wt(o,"".concat(se,"-backdrop")),t.inline||"static"===t.backdrop||Ot(c,ot,"hide")),st(t.className)&&t.className&&t.className.split(at).forEach((function(e){wt(o,e)})),t.toolbar){var u=document.createElement("ul"),h=ft(t.toolbar),d=rt.slice(0,3),f=rt.slice(7,9),m=rt.slice(9);h||wt(r,Ft(t.toolbar)),pt(h?t.toolbar:rt,(function(e,i){var n=h&&ft(e),o=h?_t(i):e,a=n&&!ut(e.show)?e.show:e;if(a&&(t.zoomable||-1===d.indexOf(o))&&(t.rotatable||-1===f.indexOf(o))&&(t.scalable||-1===m.indexOf(o))){var r=n&&!ut(e.size)?e.size:e,s=n&&!ut(e.click)?e.click:e,l=document.createElement("li");t.keyboard&&l.setAttribute("tabindex",0),l.setAttribute("role","button"),wt(l,"".concat(se,"-").concat(o)),mt(s)||Ot(l,ot,o),ct(a)&&wt(l,Ft(a)),-1!==["small","large"].indexOf(r)?wt(l,"".concat(se,"-").concat(r)):"play"===o&&wt(l,"".concat(se,"-large")),mt(s)&&zt(l,Ee,s),u.appendChild(l)}})),r.appendChild(u)}else wt(r,ge);if(!t.rotatable){var p=r.querySelectorAll('li[class*="rotate"]');wt(p,ke),pt(p,(function(e){r.appendChild(e)}))}if(t.inline)wt(l,pe),bt(o,{zIndex:t.zIndexInline}),"static"===window.getComputedStyle(i).position&&bt(i,{position:"relative"}),i.insertBefore(o,e.nextSibling);else{wt(l,de),wt(o,me),wt(o,fe),wt(o,ge),bt(o,{zIndex:t.zIndex});var v=t.container;st(v)&&(v=e.ownerDocument.querySelector(v)),v||(v=this.body),v.appendChild(o)}t.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,mt(t.ready)&&zt(e,Xe,t.ready,{once:!0}),!1!==St(e,Xe)?this.ready&&t.inline&&this.view(this.index):this.ready=!1}}}])&&Q(t.prototype,i),n&&Q(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();vt(Wt.prototype,Mt,Lt,Pt,Nt,Yt);var Bt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var Vt=function(e){return e};var Ht=function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)},Ut=Math.max;var $t=function(e,t,i){return t=Ut(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=Ut(n.length-t,0),r=Array(a);++o<a;)r[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=i(r),Ht(e,this,s)}};var Gt=function(e){return function(){return e}},Zt="object"==typeof Bt&&Bt&&Bt.Object===Object&&Bt,Kt=Zt,Jt="object"==typeof self&&self&&self.Object===Object&&self,Qt=Kt||Jt||Function("return this")(),ei=Qt.Symbol,ti=ei,ii=Object.prototype,ni=ii.hasOwnProperty,oi=ii.toString,ai=ti?ti.toStringTag:void 0;var ri=function(e){var t=ni.call(e,ai),i=e[ai];try{e[ai]=void 0;var n=!0}catch(a){}var o=oi.call(e);return n&&(t?e[ai]=i:delete e[ai]),o},si=Object.prototype.toString;var li=ri,ci=function(e){return si.call(e)},ui=ei?ei.toStringTag:void 0;var hi=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ui&&ui in Object(e)?li(e):ci(e)};var di=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},fi=hi,mi=di;var pi,vi=function(e){if(!mi(e))return!1;var t=fi(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},gi=Qt["__core-js_shared__"],bi=(pi=/[^.]+$/.exec(gi&&gi.keys&&gi.keys.IE_PROTO||""))?"Symbol(src)_1."+pi:"";var yi=function(e){return!!bi&&bi in e},wi=Function.prototype.toString;var xi=vi,ki=yi,Ii=di,_i=function(e){if(null!=e){try{return wi.call(e)}catch(t){}try{return e+""}catch(t){}}return""},ji=/^\[object .+?Constructor\]$/,Oi=Function.prototype,Ti=Object.prototype,Ei=Oi.toString,zi=Ti.hasOwnProperty,Si=RegExp("^"+Ei.call(zi).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var Ai=function(e){return!(!Ii(e)||ki(e))&&(xi(e)?Si:ji).test(_i(e))},Di=function(e,t){return null==e?void 0:e[t]};var Ci=function(e,t){var i=Di(e,t);return Ai(i)?i:void 0},Fi=function(){try{var e=Ci(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Ri=Gt,Mi=Fi,Li=Mi?function(e,t){return Mi(e,"toString",{configurable:!0,enumerable:!1,value:Ri(t),writable:!0})}:Vt,Pi=Date.now;var Ni=function(e){var t=0,i=0;return function(){var n=Pi(),o=16-(n-i);if(i=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Li),Yi=Vt,Xi=$t,qi=Ni;var Wi=function(e,t){return qi(Xi(e,t,Yi),e+"")};var Bi=function(e,t){return e===t||e!=e&&t!=t};var Vi=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Hi=vi,Ui=Vi;var $i=function(e){return null!=e&&Ui(e.length)&&!Hi(e)},Gi=/^(?:0|[1-9]\d*)$/;var Zi=function(e,t){var i=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&Gi.test(e))&&e>-1&&e%1==0&&e<t},Ki=Bi,Ji=$i,Qi=Zi,en=di;var tn=function(e,t,i){if(!en(i))return!1;var n=typeof t;return!!("number"==n?Ji(i)&&Qi(t,i.length):"string"==n&&t in i)&&Ki(i[t],e)};var nn=function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n};var on=function(e){return null!=e&&"object"==typeof e},an=hi,rn=on;var sn,ln,cn,un,hn,dn,fn,mn,pn=function(e){return rn(e)&&"[object Arguments]"==an(e)},vn=on,gn=Object.prototype,bn=gn.hasOwnProperty,yn=gn.propertyIsEnumerable,wn=pn(function(){return arguments}())?pn:function(e){return vn(e)&&bn.call(e,"callee")&&!yn.call(e,"callee")},xn=Array.isArray,kn={exports:{}};sn=kn,cn=Qt,un=function(){return!1},hn=(ln=kn.exports)&&!ln.nodeType&&ln,dn=hn&&sn&&!sn.nodeType&&sn,fn=dn&&dn.exports===hn?cn.Buffer:void 0,mn=(fn?fn.isBuffer:void 0)||un,sn.exports=mn;var In=hi,_n=Vi,jn=on,On={};On["[object Float32Array]"]=On["[object Float64Array]"]=On["[object Int8Array]"]=On["[object Int16Array]"]=On["[object Int32Array]"]=On["[object Uint8Array]"]=On["[object Uint8ClampedArray]"]=On["[object Uint16Array]"]=On["[object Uint32Array]"]=!0,On["[object Arguments]"]=On["[object Array]"]=On["[object ArrayBuffer]"]=On["[object Boolean]"]=On["[object DataView]"]=On["[object Date]"]=On["[object Error]"]=On["[object Function]"]=On["[object Map]"]=On["[object Number]"]=On["[object Object]"]=On["[object RegExp]"]=On["[object Set]"]=On["[object String]"]=On["[object WeakMap]"]=!1;var Tn=function(e){return jn(e)&&_n(e.length)&&!!On[In(e)]};var En=function(e){return function(t){return e(t)}},zn={exports:{}};!function(e,t){var i=Zt,n=t&&!t.nodeType&&t,o=n&&e&&!e.nodeType&&e,a=o&&o.exports===n&&i.process,r=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=r}(zn,zn.exports);var Sn=Tn,An=En,Dn=zn.exports,Cn=Dn&&Dn.isTypedArray,Fn=Cn?An(Cn):Sn,Rn=nn,Mn=wn,Ln=xn,Pn=kn.exports,Nn=Zi,Yn=Fn,Xn=Object.prototype.hasOwnProperty;var qn=function(e,t){var i=Ln(e),n=!i&&Mn(e),o=!i&&!n&&Pn(e),a=!i&&!n&&!o&&Yn(e),r=i||n||o||a,s=r?Rn(e.length,String):[],l=s.length;for(var c in e)!t&&!Xn.call(e,c)||r&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Nn(c,l))||s.push(c);return s},Wn=Object.prototype;var Bn=di,Vn=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Wn)},Hn=function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t},Un=Object.prototype.hasOwnProperty;var $n=qn,Gn=function(e){if(!Bn(e))return Hn(e);var t=Vn(e),i=[];for(var n in e)("constructor"!=n||!t&&Un.call(e,n))&&i.push(n);return i},Zn=$i;var Kn=Wi,Jn=Bi,Qn=tn,eo=function(e){return Zn(e)?$n(e,!0):Gn(e)},to=Object.prototype,io=to.hasOwnProperty;Kn((function(e,t){e=Object(e);var i=-1,n=t.length,o=n>2?t[2]:void 0;for(o&&Qn(t[0],t[1],o)&&(n=1);++i<n;)for(var a=t[i],r=eo(a),s=-1,l=r.length;++s<l;){var c=r[s],u=e[c];(void 0===u||Jn(u,to[c])&&!io.call(e,c))&&(e[c]=a[c])}return e}));const no="undefined"!=typeof window&&null!==window;!function(){if(no&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)return"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get(){return this.intersectionRatio>0}}),!0}();const oo=Object.prototype.propertyIsEnumerable,ao=Object.getOwnPropertySymbols;function ro(e){return"function"==typeof e||"[object Object]"===toString.call(e)}function so(e){return"__proto__"!==e&&"constructor"!==e&&"prototype"!==e}function lo(e,...t){if(!ro(e))throw new TypeError("expected the first argument to be an object");if(0===t.length||"function"!=typeof Symbol||"function"!=typeof ao)return e;for(const i of t){const t=ao(i);for(const n of t)oo.call(i,n)&&(e[n]=i[n])}return e}function co(e,...t){let i=0;var n;for(("object"==typeof(n=e)?null===n:"function"!=typeof n)&&(e=t[i++]),e||(e={});i<t.length;i++)if(ro(t[i])){for(const n of Object.keys(t[i]))so(n)&&(ro(e[n])&&ro(t[i][n])?co(e[n],t[i][n]):e[n]=t[i][n]);lo(e,t[i])}return e}const uo=({images:e=[],options:t})=>{t=co(t,{inline:!1});const i=document.createElement("div"),n=v("div",{style:{display:"none"},class:["__viewer-token"]},e.map((e=>v("img","string"==typeof e?{src:e}:e))));g(n,i);const o=i.firstElementChild;document.body.appendChild(o);const a=new Wt(o,t),r=a.destroy.bind(a);return a.destroy=function(){return r(),g(null,i),a},a.show(),o.addEventListener("hidden",(function(){this.viewer===a&&a.destroy()})),a},ho=t({__name:"RenameModalContent",setup(e,{expose:t}){const a=i({id:"",name:""});return t({setForm:e=>{Object.assign(a.value,e)},getFormData:()=>({...a.value})}),(e,t)=>{const i=n("a-input"),l=n("a-form-item"),c=n("a-form"),u=n("a-row");return o(),d(u,{justify:"center",align:"center",style:{padding:"0 5%"}},{default:s((()=>[r(c,{model:h(a),"auto-label-width":"",class:"w-full"},{default:s((()=>[r(l,{label:"文件名称",field:"name",rules:[{required:!0,message:"请输入文件名称"}],style:{"margin-bottom":"0"}},{default:s((()=>[r(i,{modelValue:h(a).name,"onUpdate:modelValue":t[0]||(t[0]=e=>h(a).name=e),placeholder:"请输入文件名称","allow-clear":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1})}}});const fo=["src"],mo=p(t({__name:"FileImage",props:{data:{}},setup(t){const i=t,n=w((()=>{const e=i.data.ext.toLowerCase();return $.includes(e)})),r=w((()=>{var e;const t=i.data.ext.toLowerCase();return(null==(e=i.data)?void 0:e.isDir)?U.dir:$.includes(t)?i.data.url:Object.keys(U).includes(t)?U[t]:U.other}));return(t,s)=>{const l=e;return h(n)?(o(),a("img",{key:0,class:"file-image",src:i.data.url},null,8,fo)):(o(),d(l,{key:1,size:"100%",name:h(r)},null,8,["name"]))}}}),[["__scopeId","data-v-314f10e3"]]),po={class:"gi-option"},vo=p(t({name:"GiOption",__name:"index",setup:e=>(e,t)=>(o(),a("ul",po,[x(e.$slots,"default",{},void 0,!0)]))}),[["__scopeId","data-v-9f37533c"]]),go={class:"gi-option-item__wrapper"},bo={class:"gi-option-item__icon"},yo={class:"gi-option-item__label"},wo=p(t({name:"GiOptionItem",__name:"index",props:{icon:{default:""},label:{default:""},more:{type:Boolean,default:!1},active:{type:Boolean,default:!1}},emits:["click"],setup(t,{emit:i}){const s=t,l=i,c=()=>{l("click")};return(t,i)=>{const l=e,u=n("IconRight");return o(),a("li",{class:I(["gi-option-item",{"gi-option-item--more":s.more,"gi-option-item--active":s.active}]),onClick:c},[f("div",go,[f("span",bo,[x(t.$slots,"icon",{},(()=>[r(l,{name:s.icon},null,8,["name"])]),!0)]),x(t.$slots,"default",{},(()=>[f("span",yo,m(s.label),1)]),!0)]),s.more?(o(),d(u,{key:0})):k("",!0)],2)}}}),[["__scopeId","data-v-7bf14a97"]]),xo=p(t({__name:"FileRightMenu",props:{data:{default:void 0},shadow:{type:Boolean,default:!0}},emits:["click"],setup(e,{emit:t}){const i=e,a=t,l=e=>{a("click",e)};return(e,t)=>{const a=n("icon-edit"),c=V,u=n("icon-download"),h=n("icon-drive-file"),f=n("icon-delete");return o(),d(vo,{class:I({shadow:i.shadow})},{default:s((()=>[r(wo,{label:"重命名",onClick:t[0]||(t[0]=e=>l("rename"))},{icon:s((()=>[r(c,{color:"#4F6BF6"},{default:s((()=>[r(a)])),_:1})])),_:1}),r(wo,{label:"下载",onClick:t[1]||(t[1]=e=>l("download"))},{icon:s((()=>[r(c,{color:"#1677FF"},{default:s((()=>[r(u)])),_:1})])),_:1}),r(wo,{label:"详情",onClick:t[2]||(t[2]=e=>l("detail"))},{icon:s((()=>[r(c,{color:"#A15FDE"},{default:s((()=>[r(h)])),_:1})])),_:1}),r(wo,{label:"删除",onClick:t[3]||(t[3]=e=>l("delete"))},{icon:s((()=>[r(c,{color:"danger"},{default:s((()=>[r(f)])),_:1})])),_:1})])),_:1},8,["class"])}}}),[["__scopeId","data-v-a8673af7"]]),ko={class:"file-grid"},Io=["onClick"],_o={class:"file-grid-item__wrapper"},jo={class:"file-icon"},Oo={class:"gi_line_1 file-name"},To=["onClick"],Eo=p(t({__name:"FileGrid",props:{data:{default:()=>[]},selectedFileIds:{default:()=>[]},isBatchMode:{type:Boolean,default:!1}},emits:["click","select","right-menu-click"],setup(e,{expose:t,emit:l}){const p=_("mode"),v=_("limit"),g=e,b=l,w=i([]),x=e=>`${e.title}${e.ext?`.${e.ext}`:""}`,k=e=>{b("select",e)};return t({clearIds:()=>{w.value=[]},getIdsData:()=>w.value}),(e,t)=>{const i=n("a-checkbox"),l=n("a-grid-item"),_=n("a-trigger"),E=n("a-grid");return o(),a("div",ko,[r(E,{cols:{xs:3,sm:3,md:4,lg:5,xl:6,xxl:7},"col-gap":12,"row-gap":12},{default:s((()=>[(o(!0),a(c,null,u(e.data,(e=>(o(),d(_,{key:e.id,trigger:"contextMenu","align-point":"","animation-name":"slide-dynamic-origin","auto-fit-transform-origin":"",position:"bl","update-at-scroll":"","scroll-to-close":""},{content:s((()=>[r(xo,{data:e,onClick:t=>((e,t)=>{b("right-menu-click",e,t)})(t,e)},null,8,["data","onClick"])])),default:s((()=>[r(l,null,{default:s((()=>[f("div",{class:I(["file-grid-item",h(w).some((t=>t.id==e.id))?"img-active":""]),onClick:j((t=>(e=>{if("select"==p)if(w.value.some((t=>t.id===e.id)))w.value=w.value.filter((t=>t.id!==e.id));else{if(1==v&&(w.value=[]),v&&w.value.length>=v)return void y.error(`最多只能选择${v}个文件`);w.value.push(e)}b("click",e)})(e)),["stop"])},[f("section",_o,[f("div",jo,[r(mo,{data:e},null,8,["data"])]),f("p",Oo,m(x(e)),1)]),O(f("section",{class:I(["check-mode",{checked:g.selectedFileIds.includes(e.id)}]),onClick:j((t=>k(e)),["stop"])},[r(i,{class:"checkbox","model-value":g.selectedFileIds.includes(e.id),onChange:t=>k(e)},null,8,["model-value","onChange"])],10,To),[[T,g.isBatchMode]])],10,Io)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])}}}),[["__scopeId","data-v-65f2d838"]]),zo={class:"file-main"},So={style:{"margin-top":"auto"}},Ao=p(t({__name:"index",emits:["selectFile"],setup(e,{expose:t,emit:c}){const u=A((()=>D((()=>import("./FileList-P7s3LS-a.js")),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12])))),p=E(),g=z(),{mode:x,selectedFileIds:I,toggleMode:j,addSelectedFileItem:C}=function(){const e=i("grid"),t=i([]),n=w((()=>t.value.map((e=>e.id))));return{mode:e,selectedFileList:t,selectedFileIds:n,toggleMode:()=>{e.value="grid"===e.value?"list":"grid"},addSelectedFileItem:e=>{if(n.value.includes(e.id)){const i=t.value.findIndex((t=>t.id===e.id));t.value.splice(i,1)}else t.value.push(e)}}}(),F=i(!1),R=i(!1),M=i([]),L=i({fileType:0,page:1,limit:20,name:""}),V=i(0);L.value.fileType=p.query.fileType||0;const H=i(),U=_("mode"),G=async()=>{try{F.value=!0,R.value=!1;const e=await N(L.value);V.value=e.data.total,M.value=e.data.data,H.value.clearIds()}catch(e){return e}finally{F.value=!1}},Z=()=>{G()};S((e=>{L.value.fileType=e.query.fileType||"0",G()}));const K=w((()=>M.value.filter((e=>$.includes(e.ext))).map((e=>e.url??"")))),J=e=>{if("select"!=U){if($.includes(e.ext)&&e.url&&K.value.length){const t=K.value.findIndex((t=>t===e.url));uo({images:K.value,options:{initialViewIndex:t}})}"mp4"===e.ext&&W(e),"mp3"===e.ext&&B(e)}},Q=e=>{C(e)},ee=(e,t)=>{"delete"===e&&b.warning({title:"提示",content:"是否删除该文件？",hideCancel:!1,okButtonProps:{status:"danger"},onBeforeOk:async()=>{Y({id:t.id}).then((()=>{y.success("删除成功"),G()})).catch((()=>{y.error("删除失败")}))}}),"rename"===e&&function(e,t){const n=i();b.open({title:"重命名",width:"90%",modalStyle:{maxWidth:"450px"},modalAnimationName:"el-fade",content:()=>v(ho,{ref:t=>{var i;n.value=t,null==(i=n.value)||i.setForm({id:e.id,name:e.name})}}),onBeforeOk:async()=>{var i,o,a;return!(await(null==(o=null==(i=n.value)?void 0:i.formRef)?void 0:o.validate()))&&(await P({id:e.id,name:null==(a=n.value)?void 0:a.getFormData().name}),y.success("重命名成功"),t&&t(),!0)}})}(t,(()=>{G()})),"detail"===e&&g.push({path:"/file/detail"})},te=()=>{b.warning({title:"提示",content:"是否删除该文件？",hideCancel:!1,okButtonProps:{status:"danger"},onBeforeOk:async()=>{X({ids:I.value}).then((()=>{y.success("删除成功"),G()})).catch((()=>{y.error("删除失败")}))}})},ie=e=>{L.value.page=e,G()},ne=e=>{L.value.limit=e,L.value.page=1,G()},oe=e=>{const{fileItem:t}=e;q(t).then((e=>{G(),y.success("上传成功")}))};return t({getListData:G,setType:e=>{L.value.fileType=e,L.value.page=1,G()},getIdsData:()=>H.value.getIdsData()}),(e,t)=>{const i=n("a-upload"),c=n("a-input"),p=n("icon-search"),v=n("a-button"),g=n("a-input-group"),b=n("a-space"),y=n("icon-delete"),w=n("icon-select-all"),_=n("icon-apps"),E=n("icon-list"),z=n("a-tooltip"),S=n("a-button-group"),A=n("a-row"),D=n("a-empty"),C=n("a-spin"),P=n("a-pagination");return o(),a("div",zo,[r(A,{justify:"space-between",class:"file-main__search"},{default:s((()=>[r(b,{wrap:""},{default:s((()=>[r(i,{"custom-request":oe,"show-file-list":!1}),r(g,null,{default:s((()=>[r(c,{placeholder:"请输入关键词...","allow-clear":"",modelValue:h(L).name,"onUpdate:modelValue":t[0]||(t[0]=e=>h(L).name=e)},null,8,["modelValue"]),r(v,{type:"primary",onClick:Z},{icon:s((()=>[r(p)])),default:s((()=>t[2]||(t[2]=[l("搜索")]))),_:1})])),_:1})])),_:1}),r(b,{wrap:""},{default:s((()=>[h(R)?(o(),d(v,{key:0,disabled:!h(I).length,type:"primary",status:"danger",onClick:te},{icon:s((()=>[r(y)])),_:1},8,["disabled"])):k("",!0),r(v,{type:"primary",onClick:t[1]||(t[1]=e=>R.value=!h(R))},{icon:s((()=>[r(w)])),default:s((()=>[l(m(h(R)?"取消批量":"批量操作"),1)])),_:1}),r(S,null,{default:s((()=>[r(z,{content:"视图",position:"bottom"},{default:s((()=>[r(v,{onClick:h(j)},{icon:s((()=>["grid"===h(x)?(o(),d(_,{key:0})):(o(),d(E,{key:1}))])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1}),r(C,{class:"file-main__list",loading:h(F)},{default:s((()=>[O(r(Eo,{data:h(M),"is-batch-mode":h(R),"selected-file-ids":h(I),onClick:J,onSelect:Q,onRightMenuClick:ee,ref_key:"FileGridRef",ref:H},null,8,["data","is-batch-mode","selected-file-ids"]),[[T,h(M).length&&"grid"===h(x)]]),O(r(h(u),{data:h(M),"is-batch-mode":h(R),"selected-file-ids":h(I),onClick:J,onSelect:Q,onRightMenuClick:ee},null,8,["data","is-batch-mode","selected-file-ids"]),[[T,h(M).length&&"list"===h(x)]]),O(r(D,null,null,512),[[T,!h(M).length]])])),_:1},8,["loading"]),f("div",So,[r(P,{total:h(V),size:"small",current:h(L).page,"page-size":h(L).limit,"show-total":"",onChange:ie,onPageSizeChange:ne,"show-page-size":""},null,8,["total","current","page-size"])])])}}}),[["__scopeId","data-v-6d94e122"]]),Do={class:"file-box"},Co=p(t({name:"FileIndex",__name:"index",props:C({limit:{type:Number,default:1},mode:{type:String,default:"select"}},{modelValue:{default:()=>[]},modelModifiers:{}}),emits:["update:modelValue"],setup(e,{expose:t}){const l=i(!1),u=()=>{l.value=!0,d.value.getListData()},d=i(null),m=e=>{d.value.setType(e)},p=e,v=i([]),g=()=>(u(),new Promise((e=>{}))),b=F(e,"modelValue");let y=!1;R(b,(e=>{if(!y&&e){if("string"==typeof e){const t=e.split(",").map((e=>e.trim())).filter(Boolean);v.value=t.map((e=>({url:e})))}else Array.isArray(e)&&(v.value=e.map((e=>({url:e.url||e,id:e.id}))));y=!0}}),{immediate:!0});const w=()=>{if("select"==p.mode){v.value=[];const e=d.value.getIdsData();e.length>0&&(e.forEach((e=>{v.value.push({url:e.url})})),b.value=v.value)}},x=e=>{const t=v.value.findIndex((t=>t.url===e.url));t>-1&&v.value.splice(t,1)};return M("limit",p.limit),M("mode",p.mode),t({open:u}),(e,t)=>{const i=n("a-upload"),u=n("a-col"),p=n("a-row"),b=n("a-modal");return o(),a(c,null,[r(i,{"list-type":"picture-card","on-before-remove":x,"file-list":h(v),"on-button-click":g,"auto-upload":!1,"image-preview":""},null,8,["file-list"]),r(b,{visible:h(l),"onUpdate:visible":t[0]||(t[0]=e=>L(l)?l.value=e:null),title:"文件管理",width:"60vw",onOk:w},{default:s((()=>[f("div",Do,[r(p,{align:"stretch",gutter:14,class:"file-manage"},{default:s((()=>[r(u,{xs:0,sm:8,md:7,lg:6,xl:5,xxl:4,flex:"220px",class:"h-full overflow-hidden"},{default:s((()=>[r(G,{onChange:m})])),_:1}),r(u,{xs:24,sm:16,md:17,lg:18,xl:19,xxl:20,flex:"1",class:"h-full overflow-hidden"},{default:s((()=>[r(Ao,{ref_key:"FileMainRef",ref:d},null,512)])),_:1})])),_:1})])])),_:1},8,["visible"])],64)}}}),[["__scopeId","data-v-ec515f2e"]]);export{xo as F,Co as _,mo as a};
