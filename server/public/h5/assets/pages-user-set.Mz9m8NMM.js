import{l as a,k as e,m as s,r as t,j as l,n,p as r,q as c,c as o,w as u,h as i,a as f,e as m,f as d,N as v,J as p,O as h,i as x,g as _,P as k}from"./index-B-vd46OS.js";import{_ as g}from"./y-footer.DYKP-ux_.js";import{e as w}from"./user.iK9CtMfV.js";const y={__name:"set",setup(y){const{USERINFO:j}=a(e()),{getUserInfo:b}=e(),{WEBCONFIG:C}=a(s()),F=t({nickname:"",avatar:""}),I=l(!1);n((()=>{setTimeout((()=>{F.nickname=j.value.nickname,F.avatar=j.value.avatar?j.value.avatar:C.value.avatar}),300)}));const N=()=>{1==I.value?v({filePath:F.avatar,name:"file",is_hide:1}).then((a=>{F.avatar=a.data.file_url,O()})):(F.avatar="",O())},O=()=>{w(F).then((a=>{I.value=!1,p.toast("修改成功"),b()}))},P=a=>{F.nickname=a.detail.value},U=()=>{h({count:1,success(a){I.value=!0,F.avatar=a.tempFilePaths[0]}})};return(a,e)=>{const s=x,t=_,l=i,n=k,v=r(c("y-footer"),g);return f(),o(l,{class:"p-12"},{default:u((()=>[m(l,{class:"bg-white p-12 round-8 flex flex-y-center flex-x-space-between"},{default:u((()=>[m(s,{src:F.avatar,class:"round-circle w-50 h-50"},null,8,["src"]),m(l,{class:"text-999 fs-14",onClick:U},{default:u((()=>[d(" 更换头像 "),m(t,{class:"iconfont icon-youjiantou"})])),_:1})])),_:1}),m(l,{class:"bg-white round-8 p-12 mt-10 flex flex-y-center flex-x-space-between"},{default:u((()=>[m(t,null,{default:u((()=>[d("昵称")])),_:1}),m(n,{placeholder:"请输入昵称",class:"text-right",modelValue:F.nickname,"onUpdate:modelValue":e[0]||(e[0]=a=>F.nickname=a),type:"nickname",onChange:P},null,8,["modelValue"])])),_:1}),m(v,{mode:"",onSuccess:N},{default:u((()=>[d("保存信息")])),_:1})])),_:1})}}};export{y as default};
