import{K as e,l as a,k as l,j as s,n as t,L as r,J as u,p as f,q as o,c as n,w as c,h as i,a as d,e as p,f as _,t as x,u as g,b as v,d as m,F as b,v as y,g as h,i as w,S as k,I as S,M as j}from"./index-B-vd46OS.js";import{_ as I}from"./mp-html.DOc8SKaJ.js";import{_ as q}from"./y-footer.DYKP-ux_.js";import{_ as B}from"./sl.Q75jM1Np.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const N=C({__name:"index",setup(C){const{USERINFO:N}=a(l()),O=s([]),P=s(0),F=s(0),J=s();t((()=>{M(),L()}));const L=()=>{r({key:"recharge"}).then((e=>{J.value=e.data}))},M=()=>{e.get("Plans/getList").then((e=>{O.value=e.data,O.value.length>0&&(P.value=O.value[0].id,F.value=u.formatNumber(O.value[0].price))}))},R=()=>{let a="applet";var l;a="official",y({title:"支付中..."}),(l={id:P.value,source:a},e.post("Order/createOrder",l)).then((e=>{var l,s;l=a,s=e.data,new Promise(((e,a)=>{"applet"!=l&&"official"!=l||WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:s.appId,timeStamp:s.timeStamp,nonceStr:s.nonceStr,package:s.package,signType:"MD5",paySign:s.paySign},(function(l){"get_brand_wcpay_request:ok"==l.err_msg?e(l):a()}))}))}))};return(e,a)=>{const l=h,s=i,t=w,r=k,y=f(o("mp-html"),I),C=f(o("y-footer"),q);return d(),n(s,null,{default:c((()=>[p(s,{class:"h-130 bg-blue-1 py-12 px-20 flex flex-x-space-between text-white"},{default:c((()=>[p(s,{class:"flex flex-column flex-y-center gap-6"},{default:c((()=>[p(l,{class:"fs-18"},{default:c((()=>[_("我的算力")])),_:1}),p(l,{class:"fs-36 fw-bold"},{default:c((()=>{var e;return[_(x(null==(e=g(N))?void 0:e.points),1)]})),_:1})])),_:1}),p(t,{src:B,class:"w-90 h-90"})])),_:1}),p(s,{class:"relative top--20 py-15 px-12 bg-white round-top-8"},{default:c((()=>[p(l,{class:"fs-18 fw-bold"},{default:c((()=>[_("选择套餐")])),_:1})])),_:1}),p(r,{class:"w-p-100","scroll-x":!0},{default:c((()=>[p(s,{class:"py-10 px-12 flex flex-y-center gap-16"},{default:c((()=>[(d(!0),v(b,null,m(O.value,((e,a)=>(d(),n(s,{class:S([P.value==e.id?"bg-blue-1 border-blue-1":"bg-grey border-grey","round-14 overflow-hidden relative w-140"]),style:{"min-width":"140px"},key:e.id,onClick:a=>{P.value=e.id,F.value=e.price}},{default:c((()=>[0!=e.give?(d(),n(s,{key:0,class:S([P.value==e.id?"bg-blue-1":"bg-grey","absolute top-0 left-0 fs-14 pl-4 pr-20 round-bottom-right-16 text-white"])},{default:c((()=>[_(" 送:"+x(e.give),1)])),_:2},1032,["class"])):j("",!0),p(s,{class:"bg-white w-p-100 flex flex-column gap-4 round-8 h-100 flex flex-center"},{default:c((()=>[p(l,{class:"fs-18 text-ellipsis-1 text-333"},{default:c((()=>[_(x(e.title),1)])),_:2},1024),p(l,{class:S(["fs-20 fw-bold",P.value==e.id?"text-blue-1":""])},{default:c((()=>[_(x(e.points),1)])),_:2},1032,["class"])])),_:2},1024),p(s,{class:S(["flex flex-column flex-center gap-2 py-8",P.value==e.id?"text-white":"text-666"])},{default:c((()=>[p(s,{class:"flex flex-y-baseline"},{default:c((()=>[p(l,{class:"fs-12"},{default:c((()=>[_("￥")])),_:1}),p(l,{class:"fs-20"},{default:c((()=>[_(x(g(u).formatNumber(e.price)),1)])),_:2},1024)])),_:2},1024),p(l,{class:"fs-12 text-s"},{default:c((()=>[_("￥"+x(e.original_price),1)])),_:2},1024)])),_:2},1032,["class"])])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),p(s,{class:"p-12"},{default:c((()=>{var e;return[p(l,{class:"fs-18 fw-bold"},{default:c((()=>[_("充值说明")])),_:1}),p(y,{content:null==(e=J.value)?void 0:e.content},null,8,["content"])]})),_:1}),p(C,{mode:"",onSuccess:R},{default:c((()=>[_("立即支付 ￥"+x(F.value),1)])),_:1})])),_:1})}}},[["__scopeId","data-v-0beb43b6"]]);export{N as default};
