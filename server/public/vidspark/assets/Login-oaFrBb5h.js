import{y as V,r as v,k as L,z as $,B as t,R as e,P as i,J as l,al as u,O as _,A as R,a4 as S,aC as C}from"./vendor-wvQTfXLn.js";import{l as q}from"./genhuman-CgPh9CLX.js";import{L as z}from"./LanguageSwitcher-yN38R19n.js";import{a as w}from"./elementplus-Zrp5FPwK.js";import{u as B}from"./index-DUuv3B8a.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"login-page"},E={class:"login-container"},A={class:"login-header"},J={class:"login-footer"},K={class:"language-switcher"},M=V({__name:"Login",setup(O){const{t:d}=B(),y=C(),p=v(),c=v(!1),r=L({email:"",password:""}),k={email:[{required:!0,message:d("auth.emailRequired"),trigger:"blur"},{type:"email",message:d("auth.invalidEmail"),trigger:"blur"}],password:[{required:!0,message:d("auth.passwordRequired"),trigger:"blur"},{min:6,message:"Password must be at least 6 characters",trigger:"blur"}]};async function h(){var o,n;if(!(!p.value||!await p.value.validate().catch(()=>!1))){c.value=!0;try{const s=await q(r),{token:m,user:g}=s.data;localStorage.setItem("vidspark_token",m),localStorage.setItem("vidspark_user",JSON.stringify(g)),w.success(d("auth.loginSuccess")),y.push("/dashboard")}catch(s){w.error(((n=(o=s.response)==null?void 0:o.data)==null?void 0:n.message)||"Login failed")}finally{c.value=!1}}}return(a,o)=>{const n=u("el-input"),s=u("el-form-item"),m=u("el-button"),g=u("el-form"),b=u("router-link");return R(),$("div",N,[t("div",E,[t("div",A,[t("h1",null,i(a.$t("app.name")),1),t("p",null,i(a.$t("app.tagline")),1)]),e(g,{model:r,rules:k,ref_key:"formRef",ref:p,class:"login-form"},{default:l(()=>[e(s,{prop:"email"},{default:l(()=>[e(n,{modelValue:r.email,"onUpdate:modelValue":o[0]||(o[0]=f=>r.email=f),placeholder:a.$t("auth.email"),size:"large","prefix-icon":"Message"},null,8,["modelValue","placeholder"])]),_:1}),e(s,{prop:"password"},{default:l(()=>[e(n,{modelValue:r.password,"onUpdate:modelValue":o[1]||(o[1]=f=>r.password=f),type:"password",placeholder:a.$t("auth.password"),size:"large","prefix-icon":"Lock","show-password":"",onKeyup:S(h,["enter"])},null,8,["modelValue","placeholder"])]),_:1}),e(s,null,{default:l(()=>[e(m,{type:"primary",size:"large",style:{width:"100%"},loading:c.value,onClick:h},{default:l(()=>[_(i(a.$t("auth.login")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),t("div",J,[t("p",null,[_(i(a.$t("auth.noAccount"))+" ",1),e(b,{to:"/register"},{default:l(()=>[_(i(a.$t("auth.register")),1)]),_:1})])]),t("div",K,[e(z)])])])}}}),x=I(M,[["__scopeId","data-v-dc87c2bc"]]);export{x as default};
