import{y as b,r as w,k as P,z as $,B as l,R as s,P as u,J as i,al as p,O as h,A as q,a4 as S,aC as z}from"./vendor-wvQTfXLn.js";import{r as C}from"./genhuman-CgPh9CLX.js";import{L as B}from"./LanguageSwitcher-yN38R19n.js";import{a as v}from"./elementplus-Zrp5FPwK.js";import{u as E}from"./index-DUuv3B8a.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"register-page"},M={class:"register-container"},N={class:"register-header"},U={class:"register-footer"},A={class:"language-switcher"},J=b({__name:"Register",setup(K){const{t:n}=E(),y=z(),m=w(),c=w(!1),r=P({email:"",password:"",confirmPassword:""}),k=(a,e,o)=>{e!==r.password?o(new Error(n("auth.passwordMismatch"))):o()},V={email:[{required:!0,message:n("auth.emailRequired"),trigger:"blur"},{type:"email",message:n("auth.invalidEmail"),trigger:"blur"}],password:[{required:!0,message:n("auth.passwordRequired"),trigger:"blur"},{min:6,message:"Password must be at least 6 characters",trigger:"blur"}],confirmPassword:[{required:!0,message:n("auth.passwordRequired"),trigger:"blur"},{validator:k,trigger:"blur"}]};async function _(){var e,o;if(!(!m.value||!await m.value.validate().catch(()=>!1))){c.value=!0;try{const t=await C({email:r.email,password:r.password}),{token:g,user:f}=t.data;localStorage.setItem("vidspark_token",g),localStorage.setItem("vidspark_user",JSON.stringify(f)),v.success(n("auth.registerSuccess")),y.push("/dashboard")}catch(t){v.error(((o=(e=t.response)==null?void 0:e.data)==null?void 0:o.message)||"Registration failed")}finally{c.value=!1}}}return(a,e)=>{const o=p("el-input"),t=p("el-form-item"),g=p("el-button"),f=p("el-form"),R=p("router-link");return q(),$("div",L,[l("div",M,[l("div",N,[l("h1",null,u(a.$t("app.name")),1),l("p",null,u(a.$t("app.tagline")),1)]),s(f,{model:r,rules:V,ref_key:"formRef",ref:m,class:"register-form"},{default:i(()=>[s(t,{prop:"email"},{default:i(()=>[s(o,{modelValue:r.email,"onUpdate:modelValue":e[0]||(e[0]=d=>r.email=d),placeholder:a.$t("auth.email"),size:"large","prefix-icon":"Message"},null,8,["modelValue","placeholder"])]),_:1}),s(t,{prop:"password"},{default:i(()=>[s(o,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=d=>r.password=d),type:"password",placeholder:a.$t("auth.password"),size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue","placeholder"])]),_:1}),s(t,{prop:"confirmPassword"},{default:i(()=>[s(o,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=d=>r.confirmPassword=d),type:"password",placeholder:a.$t("auth.confirmPassword"),size:"large","prefix-icon":"Lock","show-password":"",onKeyup:S(_,["enter"])},null,8,["modelValue","placeholder"])]),_:1}),s(t,null,{default:i(()=>[s(g,{type:"primary",size:"large",style:{width:"100%"},loading:c.value,onClick:_},{default:i(()=>[h(u(a.$t("auth.register")),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),l("div",U,[l("p",null,[h(u(a.$t("auth.hasAccount"))+" ",1),s(R,{to:"/login"},{default:i(()=>[h(u(a.$t("auth.login")),1)]),_:1})])]),l("div",A,[s(B)])])])}}}),G=I(J,[["__scopeId","data-v-f8fc3d73"]]);export{G as default};
